"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[6545],{76165:function(fe,k,t){t.d(k,{NL:function(){return e},rJ:function(){return W},ri:function(){return A},v0:function(){return te}});var c=t(12903),F=t.n(c),d=t(32810),Y=t.n(d),U=t(5677),x=t.n(U),E=t(53874),W=function(I){return I[I.PENDING=0]="PENDING",I[I.GENERATING=1]="GENERATING",I[I.DONE=2]="DONE",I[I.STOPPED=3]="STOPPED",I}({}),A=F()(function I(y){Y()(this,I),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"createdAt",void 0),x()(this,"title",void 0),x()(this,"prompts",void 0),x()(this,E.sc,!0),this.id=y.id,this.assistantId=y.assistantId,this.createdAt=y.createdAt||new Date().valueOf(),this.title=y.title,this.prompts=y.prompts||[]}),e=F()(function I(y){Y()(this,I),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"createdAt",void 0),x()(this,"title",void 0),x()(this,"messages",void 0),x()(this,E.sc,!0),this.id=y.id,this.assistantId=y.assistantId,this.createdAt=y.createdAt||new Date().valueOf(),this.title=y.title,this.messages=y.messages||[]}),te=F()(function I(y){var J,D;Y()(this,I),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"creator",void 0),x()(this,"createdAt",void 0),x()(this,"content",void 0),x()(this,"status",void 0),x()(this,E.sc,!0),this.id=y.id,this.creator=y.creator,this.assistantId=y.assistantId,this.createdAt=y.createdAt||new Date().valueOf(),this.content=(J=y.content)!==null&&J!==void 0?J:"",this.status=(D=y.status)!==null&&D!==void 0?D:W.PENDING})},46545:function(fe,k,t){t.d(k,{Z:function(){return mn}});var c=t(79685),F=t(48651),d=t.n(F),Y=t(90554),U=t(28870),x=t(38046),E=t.n(x),W=t(68591),A=t.n(W),e=t(63342),te=["type","className","children"],I="LINE_GRADIENT_ID";function y(n){var r=n.type,o=n.className,l=n.children,s=E()(n,te);return(0,e.jsxs)(U.default,d()(d()({className:A()("dtc__aigc__button",o,"dtc__aigc__button--".concat(r)),ghost:!0},s),{},{children:[(0,e.jsx)("svg",{width:"0",height:"0",children:(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:I,gradientTransform:"rotate(90)",children:[(0,e.jsx)("stop",{offset:"0%",stopColor:"#00bac6"}),(0,e.jsx)("stop",{offset:"50%",stopColor:"#0067ff"}),(0,e.jsx)("stop",{offset:"100%",stopColor:"#450fde"})]})})}),l]}))}var J=t(81930),D=t(45217),ce=t(9392),ve=["lineNumberStyle"];function oe(n){var r=n.className,o=n.style,l=n.language,s=n.copy,f=n.value,p=n.convert,S=n.options,j=S===void 0?{}:S,V=j.lineNumberStyle,b=V===void 0?{}:V,$=E()(j,ve),B=(0,c.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:d()({},s||{})}},[s]),L=f||"";return(0,e.jsxs)("div",{className:A()("dtc__aigc__codeblock",p&&"dtc__aigc__codeblock--convert",r),style:o,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:l.toLocaleLowerCase()}),(0,e.jsx)("div",{className:"dtc__aigc__codeblock__tool",children:!B.disabled&&(0,e.jsx)(ce.Z,d()({text:L},B.options))})]}),(0,e.jsx)(J.Z,d()(d()({language:l.toLocaleLowerCase(),wrapLines:!0,style:d()(d()({},D.Yn),{},{'code[class*="language-"]':d()(d()({},D.Yn['code[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff"}),'pre[class*="language-"]':d()(d()({},D.Yn['pre[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:d()({fontStyle:"normal"},b),showLineNumbers:!0},$),{},{children:L}))]})}var se=t(86516),z=t.n(se),M=t(76165),ue=["className"],O=["className"],q=["className"],ee=["className"],ae=["className"],me=["className"];function ie(n){var r=n.className,o=E()(n,ue);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",r)},o),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1259_37039)",fillRule:"evenodd",d:"M8.5 3.5a.5.5 0 00-1 0V4H4.75a1 1 0 00-1 1v7a1 1 0 001 1h6.5a1 1 0 001-1V5a1 1 0 00-1-1H8.5v-.5zm2.75 8.5V5h-6.5v7h6.5zM7 8.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM3 7a.5.5 0 00-1 0v3a.5.5 0 001 0V7zm-2 .5a.5.5 0 01.5.5v1a.5.5 0 01-1 0V8a.5.5 0 01.5-.5zm14.5.5a.5.5 0 00-1 0v1a.5.5 0 001 0V8zm-2-1.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0V7a.5.5 0 01.5-.5zM9.75 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1259_37039",x1:"0.5",x2:"16.294",y1:"3",y2:"11.529",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function ge(n){var r=n.className,o=E()(n,O);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",r)},o),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.495 4.209a6.609 6.609 0 00-5.452-2.87 6.621 6.621 0 00-6.617 6.626 6.621 6.621 0 006.617 6.625 6.62 6.62 0 006.208-4.324.5.5 0 10-.938-.347 5.62 5.62 0 01-5.27 3.67 5.621 5.621 0 01-5.617-5.624A5.621 5.621 0 018.043 2.34a5.61 5.61 0 014.731 2.59l-.003.003L11.304 6.4h3.446V2.955L13.495 4.21z",clipRule:"evenodd"})})}))}function _e(n){var r=n.className,o=E()(n,q);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",r)},o),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.332 7.999a6.666 6.666 0 016.667-6.667 6.666 6.666 0 016.666 6.667A6.666 6.666 0 018 14.665 6.666 6.666 0 011.332 8zm12.333 0A5.666 5.666 0 008 2.332a5.665 5.665 0 00-5.667 5.667 5.666 5.666 0 005.667 5.666A5.666 5.666 0 0013.665 8zM6.972 6.125a.5.5 0 01.5.5v2.747a.5.5 0 01-1 0V6.625a.5.5 0 01.5-.5zm2.553.5a.5.5 0 10-1 0v2.747a.5.5 0 001 0V6.625z",clipRule:"evenodd"})})}))}function pe(n){var r=n.className,o=E()(n,ee);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",r)},o),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 268 265",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1290_3143)",fillOpacity:"0.03",fillRule:"evenodd",d:"M210.656 14.094c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.156 5.89-13.156 13.156V27.25h-72.36c-14.532 0-26.312 11.78-26.312 26.313V237.75c0 14.532 11.78 26.313 26.312 26.313h171.032c14.532 0 26.312-11.781 26.312-26.313V53.562c0-14.531-11.78-26.312-26.312-26.312h-72.36V14.094zm72.36 39.468H111.984V237.75h171.032V53.562zm-111.828 85.516c0 10.899-8.836 19.735-19.735 19.735s-19.734-8.836-19.734-19.735 8.835-19.734 19.734-19.734c10.899 0 19.735 8.835 19.735 19.734zm-105.25-32.89c0-7.267-5.89-13.157-13.157-13.157-7.266 0-13.156 5.89-13.156 13.157v78.937c0 7.266 5.89 13.156 13.156 13.156 7.266 0 13.157-5.89 13.157-13.156v-78.937zm-52.626 13.156c7.266 0 13.157 5.89 13.157 13.156v26.313c0 7.266-5.89 13.156-13.157 13.156-7.265 0-13.156-5.89-13.156-13.156V132.5c0-7.266 5.89-13.156 13.156-13.156zM394.844 132.5c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.157 5.89-13.157 13.156v26.313c0 7.266 5.891 13.156 13.157 13.156s13.156-5.89 13.156-13.156V132.5zm-52.625-39.469c7.266 0 13.156 5.89 13.156 13.157v78.937c0 7.266-5.89 13.156-13.156 13.156-7.266 0-13.156-5.89-13.156-13.156v-78.937c0-7.267 5.89-13.157 13.156-13.157zm-98.672 65.782c10.899 0 19.734-8.836 19.734-19.735s-8.835-19.734-19.734-19.734c-10.899 0-19.734 8.835-19.734 19.734 0 10.899 8.835 19.735 19.734 19.735z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1290_3143",x1:"0.156",x2:"415.745",y1:"0.938",y2:"225.356",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function Te(n){var r=n.className,o=E()(n,ae);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",r)},o),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"currentColor",d:"M13.07 1.662a.547.547 0 11.86.676l-6.884 8.765v3.147a.547.547 0 01-.507.545l-.04.002a.547.547 0 01-.546-.547v-3.336c0-.123.041-.241.117-.338l7-8.914z"}),(0,e.jsx)("path",{fill:"currentColor",d:"M13.488 1.271a.547.547 0 01.804.548L12.81 13.57a.547.547 0 01-.799.415l-3.81-2.027a.547.547 0 11.513-.965l3.11 1.654 1.25-9.902-9.92 5.425 2.169 1.149c.255.135.36.442.245.702l-.018.037a.547.547 0 01-.739.227L1.744 8.661a.547.547 0 01-.006-.963l11.75-6.427z"})]})}))}var xe=function(r){var o=r.className,l=E()(r,me);return(0,e.jsx)("span",d()(d()({className:A()("dtc__icon",o)},l),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,e.jsx)("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:(0,e.jsx)("g",{transform:"translate(-340 -367)",children:(0,e.jsx)("g",{transform:"translate(201 320)",children:(0,e.jsx)("g",{transform:"translate(139 47)",children:(0,e.jsx)("path",{fill:"currentColor",d:"M11 1.5A1.5 1.5 0 0112.5 3v.25h.5a1.5 1.5 0 011.5 1.5v8a1.5 1.5 0 01-1.5 1.5H5a1.5 1.5 0 01-1.5-1.5v-.25H3a1.5 1.5 0 01-1.493-1.356L1.5 11V3A1.5 1.5 0 013 1.5zm1.5 9.5a1.5 1.5 0 01-1.5 1.5H4.5v.25a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-8a.5.5 0 00-.5-.5h-.5zM11 2.5H3a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h8a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5zm-4 1a.5.5 0 01.5.5v2.5H10a.5.5 0 110 1H7.5V10a.5.5 0 11-1 0V7.5H4a.5.5 0 010-1h2.5V4a.5.5 0 01.5-.5z"})})})})})})}))},Ae=t(88289),ye=t(4125),Me=t(80244),Ce=t(59058),be=t(58351);function Se(n){return n.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:n.children})}var Le=t(70300),Ve=t.n(Le),Ue=t(50459),Ge=t(71877),He=["typing","className","rehypePlugins","remarkPlugins","components","children","onMount"],je=(0,c.memo)(function(r){var o=r.typing,l=r.className,s=r.rehypePlugins,f=s===void 0?[]:s,p=r.remarkPlugins,S=p===void 0?[]:p,j=r.components,V=r.children,b=r.onMount,$=E()(r,He);return(0,c.useEffect)(function(){b==null||b()},[]),(0,e.jsx)(Ue.D,d()(d()({className:A()("dtc__aigc__markdown",o&&"dtc__aigc__markdown--blink",l),rehypePlugins:f,remarkPlugins:[Ge.Z].concat(Ve()(S)),components:d()({code:function(L){var K=L.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:K})},pre:function(L){var K=L.children,g=K[0],Z=/language-(\w+)/.exec(g.props.className||""),Q=Z?Z[1]:"SQL",H=String(g.props.children).replace(/\n$/,"");return(0,e.jsx)(oe,{value:H,language:Q})}},j)},$),{},{children:V}))},function(n,r){return!(n.typing!==r.typing||n.className!==r.className||n.children!==r.children)}),Fe=t(49604),We=t(52399);function De(n){var r=n.current,o=n.total,l=n.onChange,s=n.style,f=n.disabled,p=r===1||f,S=r===o||f;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:s,children:[(0,e.jsx)(Fe.Z,{className:p?"arrow-disabled":"",onClick:function(){p||l(r-1)}}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:o})]}),(0,e.jsx)(We.Z,{className:S?"arrow-disabled":"",onClick:function(){S||l(r+1)}})]})}var Oe=c.createContext({chat:void 0,maxRegenerateCount:5});function he(){return c.useContext(Oe)}var Ke=["formatText","style"];function $e(n){var r=n.data,o=n.regenerate,l=n.copy,s=n.onRegenerate,f=n.onStop,p=n.onLazyRendered,S=(0,c.useRef)(null),j=he(),V=j.components,b=V===void 0?{}:V,$=(0,c.useState)(!1),B=z()($,2),L=B[0],K=B[1],g=(0,c.useRef)(function(){}),Z=function(h){var T=z()(h,1),X=T[0];X.isIntersecting&&K(function(de){if(!de){var re=function(){return new Promise(function(fn){g.current=fn})};p==null||p(re)}return!0})};(0,be.Z)(Z,S);var Q=(0,c.useState)(r.length),H=z()(Q,2),ne=H[0],N=H[1],m=r[ne-1],R=(0,c.useMemo)(function(){return m?[m.status===M.rJ.GENERATING,m.status===M.rJ.PENDING,m.status===M.rJ.STOPPED]:[!1,!1,!1]},[m]),P=z()(R,3),w=P[0],a=P[1],i=P[2];(0,c.useEffect)(function(){N(r.length)},[r.length]);var v=(0,c.useMemo)(function(){return Object.keys(b).reduce(function(_,h){var T=b[h];return _[h]=function(){for(var X=arguments.length,de=new Array(X),re=0;re<X;re++)de[re]=arguments[re];return typeof T=="function"?T.apply(void 0,de.concat([{messageId:m==null?void 0:m.id}])):T},_},{})},[b,m==null?void 0:m.id]),u=(0,c.useMemo)(function(){return typeof l=="boolean"?{disabled:l,options:{}}:{disabled:!1,options:d()({},l||{})}},[l]),C=function(){var h;if(u.disabled)return null;var T=u.options,X=T.formatText,de=T.style,re=E()(T,Ke),Pe=(h=X==null?void 0:X(m==null?void 0:m.content))!==null&&h!==void 0?h:m==null?void 0:m.content;return Pe?(0,e.jsx)(ce.Z,d()({className:"dtc__message__icon",button:(0,e.jsx)(xe,{}),text:Pe,style:d()({fontSize:16},de)},re)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(ie,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:A()("dtc__message__content",a&&"dtc__message__content--loading"),ref:S,children:[(0,e.jsx)(Se,{loading:a,children:L&&(0,e.jsx)(je,{typing:w,components:v,onMount:function(){g.current()},children:m==null?void 0:m.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[r.length>1&&!w&&!a&&(0,e.jsx)(De,{current:ne,total:r.length,onChange:function(h){return N(h)}}),i&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(w||a)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(U.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return f==null?void 0:f(m)},icon:(0,e.jsx)(_e,{style:{fontSize:16,display:"inline-flex"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!w&&!a&&(0,e.jsxs)(ye.default,{className:"dtc__message__iconGroup",children:[C(),o&&(0,e.jsx)(Ce.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(h){return h.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return s==null?void 0:s(m)},children:(0,e.jsx)(ge,{style:{fontSize:16}})})})]})]})}function Be(n){var r=n.content,o=n.className,l=he(),s=l.components,f=s===void 0?{}:s;return(0,e.jsx)("section",{className:A()("dtc__prompt__container",o),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(je,{components:f,children:r||""})})})})}var Ye=(0,c.forwardRef)(function(n,r){var o,l,s=n.data,f=n.placeholder,p=n.robotIcon,S=p===void 0?!0:p,j=n.scrollable,V=j===void 0?!0:j,b=n.onRegenerate,$=n.onStop,B=he(),L=B.maxRegenerateCount,K=B.copy,g=(0,c.useRef)(null),Z=(0,c.useState)(!0),Q=z()(Z,2),H=Q[0],ne=Q[1];(0,c.useImperativeHandle)(r,function(){return{nativeElement:g.current,scrollToBottom:function(){window.requestAnimationFrame(function(){var w,a;(w=g.current)===null||w===void 0||w.scrollTo({top:(a=g.current)===null||a===void 0?void 0:a.scrollHeight,left:0,behavior:"instant"})})}}});var N=function(){if(!g.current)return!1;var w=5,a=g.current,i=a.scrollTop,v=a.clientHeight,u=a.scrollHeight;return i+v>=u-w},m=!!(Array.isArray(s)&&s.length),R=m?(o=s.at(-1))===null||o===void 0||(l=o.messages)===null||l===void 0?void 0:l.at(-1):void 0;return(0,c.useLayoutEffect)(function(){var P,w=function(){g.current&&ne(N())};return(P=g.current)===null||P===void 0||P.addEventListener("scroll",w),function(){var a;(a=g.current)===null||a===void 0||a.removeEventListener("scroll",w)}},[]),(0,c.useLayoutEffect)(function(){window.requestAnimationFrame(function(){g.current&&(m?g.current.scrollTop=g.current.scrollHeight:g.current.scrollTop=0)})},[R==null?void 0:R.id]),(0,c.useLayoutEffect)(function(){window.requestAnimationFrame(function(){g.current&&(R==null?void 0:R.status)===M.rJ.GENERATING&&H&&(g.current.scrollTop=g.current.scrollHeight)})},[R==null?void 0:R.status,R==null?void 0:R.content,H]),(0,e.jsx)("div",{className:A()("dtc__aigc__content__container",!V&&"dtc__aigc__content__container--disabled",m&&V&&"dtc__aigc__content__container--valid"),ref:g,children:m?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:s.map(function(P,w){return(0,e.jsxs)(c.Fragment,{children:[(0,e.jsx)(Be,{content:P.title}),(0,e.jsx)($e,{data:P.messages,regenerate:w===s.length-1&&P.messages.length<L,copy:K,onRegenerate:function(i){return b==null?void 0:b(i,P)},onStop:function(i){return $==null?void 0:$(i,P)},onLazyRendered:function(i){var v=N();i().then(function(){window.requestAnimationFrame(function(){ne(v),v&&g.current&&(g.current.scrollTop=g.current.scrollHeight)})})}})]},P.id)})}):(0,e.jsxs)(c.Fragment,{children:[f,S&&(0,e.jsx)(pe,{style:{fontSize:200,position:"absolute",right:0,bottom:-100}})]})})}),Je=Ye,pn=t(83345),Ze=t(50425),Qe=["onChange","onPressEnter","onPressShiftEnter","className"];function Xe(n){var r=n.onChange,o=n.onPressEnter,l=n.onPressShiftEnter,s=n.className,f=E()(n,Qe),p=function(j){r==null||r(j.target.value)};return(0,e.jsx)(Ze.default.TextArea,d()(d()({className:A()("aigc-textarea",s)},f),{},{onChange:p,onPressEnter:function(j){j.persist(),j.preventDefault(),j.shiftKey?(r==null||r(f.value+`
`),l==null||l(j)):o==null||o(j)},autoSize:{minRows:1,maxRows:8}}))}var ke=t(12903),Ne=t.n(ke),qe=t(32810),Ee=t.n(qe),en=t(89822),Ie=t.n(en),nn=t(38832),Re=t.n(nn),le=t(53874),tn=t(22786),we=t.n(tn),rn=t(46299),on=t.n(rn),ze=50;function sn(n){var r=n.onTyping,o=(0,c.useRef)(),l=(0,c.useRef)(""),s=(0,c.useRef)(1),f=(0,c.useRef)(0),p=(0,c.useRef)(!1),S=(0,c.useState)(!1),j=z()(S,2),V=j[0],b=j[1],$=(0,c.useRef)(!1),B=(0,c.useRef)(0);function L(){var N=l.current.length-f.current-1,m=1e3/ze;s.current=Math.ceil(N/m)}function K(){o.current||(o.current=window.setInterval(function(){if(f.current<l.current.length){var N=l.current;r(N.slice(0,f.current+s.current)),f.current+=s.current}else p.current||(window.clearInterval(o.current),o.current=0,b(!1),$.current=!1)},ze))}(0,c.useEffect)(function(){return function(){window.clearInterval(o.current),window.clearInterval(B.current),o.current=0}},[]);function g(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";p.current=!0,b(!0),window.clearInterval(o.current),o.current=0,l.current=N,f.current=N.length}function Z(N){p.current&&(N.startsWith("n")&&l.current.endsWith("\\")?l.current=l.current.slice(0,-1)+`
`+N.slice(1).replace(/\\n/g,`
`):l.current+=N.replace(/\\n/g,`
`),L(),K())}function Q(){return H.apply(this,arguments)}function H(){return H=on()(we()().mark(function N(){return we()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return p.current=!1,$.current=!0,window.clearInterval(B.current),R.abrupt("return",new Promise(function(P){B.current=window.setInterval(function(){$.current||(P(),$.current=!0,window.clearInterval(B.current))},1e3)}));case 4:case"end":return R.stop()}},N)})),H.apply(this,arguments)}function ne(){p.current=!1,b(!1),$.current=!1,o.current&&(window.clearInterval(o.current),o.current=0),l.current="",f.current=0}return{start:g,push:Z,close:Q,stop:ne,isTyping:V}}var an=function(n){Ie()(o,n);var r=Re()(o);function o(){return Ee()(this,o),r.apply(this,arguments)}return Ne()(o)}(M.ri),ln=function(n){Ie()(o,n);var r=Re()(o);function o(){return Ee()(this,o),r.apply(this,arguments)}return Ne()(o)}(M.NL),cn=function(n){Ie()(o,n);var r=Re()(o);function o(){return Ee()(this,o),r.apply(this,arguments)}return Ne()(o)}(M.v0),un=function(r){return(r+1)%1e6};function dn(n){var r=(0,c.useReducer)(un,0),o=z()(r,2),l=o[1],s=(0,c.useRef)(void 0),f=sn({onTyping:function(i){N(p.current.promptId,p.current.messageId,{content:i})}}),p=(0,c.useRef)({promptId:"",messageId:""});function S(a,i){f.start(),N(a,i,{status:M.rJ.PENDING}),p.current={promptId:a,messageId:i}}function j(a,i,v){if(a===p.current.promptId&&i===p.current.messageId){var u;f.push(v),((u=m(a,i))===null||u===void 0?void 0:u.status)!==M.rJ.GENERATING&&N(a,i,{status:M.rJ.GENERATING})}}function V(a,i){f.close().then(function(){N(a,i,{status:M.rJ.DONE})})}function b(a){var i,v=(n==null||(i=n.ctor)===null||i===void 0?void 0:i.Conversation)||an;s.current=new v(a),l()}function $(){s.current=void 0,l()}function B(a){s&&(s.current=(0,le.Uy)(s.current,function(i){Object.assign(i,a)}),l())}function L(){return s.current}function K(){for(var a,i=arguments.length,v=new Array(i),u=0;u<i;u++)v[u]=arguments[u];if(s.current){var C=(n==null||(a=n.ctor)===null||a===void 0?void 0:a.Prompt)||ln;s.current=(0,le.Uy)(s.current,function(_){var h;(h=_.prompts)===null||h===void 0||h.push(new C(v[0]))}),l()}}function g(a){s.current&&(s.current=(0,le.Uy)(s.current,function(i){var v,u,C=(v=i.prompts)===null||v===void 0?void 0:v.findIndex(function(_){return _.id===a});C!==-1&&((u=i.prompts)===null||u===void 0||u.splice(C,1))}),l())}function Z(a,i){s.current&&(s.current=(0,le.Uy)(s.current,function(v){var u=v.prompts.find(function(C){return C.id===a});u&&(typeof i=="function"?Object.assign(u,i(u)):Object.assign(u,i))}),l())}function Q(a){var i,v;return(i=s.current)===null||i===void 0||(v=i.prompts)===null||v===void 0?void 0:v.find(function(u){return typeof a=="function"?a(u):u.id===a})}function H(a){for(var i,v=arguments.length,u=new Array(v>1?v-1:0),C=1;C<v;C++)u[C-1]=arguments[C];if(s.current){var _=(n==null||(i=n.ctor)===null||i===void 0?void 0:i.Message)||cn;s.current=(0,le.Uy)(s.current,function(h){var T=h.prompts.find(function(X){return X.id===a});T&&T.messages.push(new _(u[0]))}),l()}}function ne(a,i){s.current&&(s.current=(0,le.Uy)(s.current,function(v){var u,C,_=v.prompts.find(function(T){return T.id===a});if(_){var h=(u=_.messages)===null||u===void 0?void 0:u.findIndex(function(T){return T.id===i});h!==-1&&((C=_.messages)===null||C===void 0||C.splice(h,1))}}),l())}function N(a,i,v){s.current&&(s.current=(0,le.Uy)(s.current,function(u){var C,_=u.prompts.find(function(T){return T.id===a}),h=_==null||(C=_.messages)===null||C===void 0?void 0:C.find(function(T){return T.id===i});h&&(typeof v=="function"?Object.assign(h,v(h)):Object.assign(h,v))}),l())}function m(a,i){var v,u,C,_;return(v=s.current)===null||v===void 0||(u=v.prompts)===null||u===void 0||(C=u.find(function(h){return h.id===a}))===null||C===void 0||(_=C.messages)===null||_===void 0?void 0:_.find(function(h){return h.id===i})}function R(){var a,i,v,u=(a=s.current)===null||a===void 0||(i=a.prompts.at(-1))===null||i===void 0||(v=i.messages)===null||v===void 0?void 0:v.at(-1);return u?u.status===M.rJ.PENDING||u.status===M.rJ.GENERATING:!1}function P(){return L()}function w(a){s.current=a,l()}return{conversation:{create:b,remove:$,update:B,get:L},prompt:{create:K,remove:g,update:Z,get:Q},message:{create:H,remove:ne,update:N,get:m},loading:R,start:S,push:j,close:V,stop:f.stop,isTyping:f.isTyping,saveViewState:P,restoreViewState:w}}var vn=5;function G(n){var r=n.chat,o=n.components,l=n.maxRegenerateCount,s=l===void 0?vn:l,f=n.copy,p=n.children;return(0,e.jsx)(Oe.Provider,{value:{chat:r,components:o,maxRegenerateCount:s,copy:f},children:p})}G.useChat=dn,G.useContext=he,G.Loading=Se,G.Button=y,G.CodeBlock=oe,G.Input=Xe,G.Markdown=je,G.Pagination=De,G.Message=$e,G.Prompt=Be,G.Content=Je,G.Icon={SendIcon:Te};var mn=G},9392:function(fe,k,t){t.d(k,{Z:function(){return oe}});var c=t(48651),F=t.n(c),d=t(80244),Y=t(59058),U=t(86516),x=t.n(U),E=t(71089),W=t(75020),A=t(79685),e=t(68591),te=t.n(e),I=t(16777),y=t.n(I),J=t(50475),D=t(63342),ce=function(){return(0,D.jsx)("span",{className:"dtc-copy__default-icon",children:(0,D.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:(0,D.jsx)("path",{d:"M704 96a96 96 0 0 1 96 96v16h32a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H320a96 96 0 0 1-96-96v-16h-32a96 96 0 0 1-95.936-92.4L96 704V192a96 96 0 0 1 96-96z m96 608a96 96 0 0 1-96 96H288v16a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32h-32z m-96-544H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32z m-256 64a32 32 0 0 1 32 32v160h160a32 32 0 1 1 0 64H480v160a32 32 0 1 1-64 0V480H256a32 32 0 1 1 0-64h160V256a32 32 0 0 1 32-32z"})})})},ve=function(z){var M=z.button,ue=M===void 0?(0,D.jsx)(ce,{}):M,O=z.text,q=z.tooltip,ee=q===void 0?"\u590D\u5236":q,ae=z.style,me=z.className,ie=z.onCopy,ge=ie===void 0?function(){return W.default.success("\u590D\u5236\u6210\u529F")}:ie,_e=y()(),pe=x()(_e,2),Te=pe[0],xe=pe[1],Ae=function(){xe(O),ge(O)},ye=function(){return(0,D.jsx)("span",{className:te()(["dtc-copy",me]),style:ae,onClick:function(){return Ae()},children:ue})},Me=(0,J.Z)(ee);return(0,D.jsx)(Y.default,F()(F()({},Me),{},{children:ye()}))},oe=ve},58351:function(fe,k,t){var c=t(86516),F=t.n(c),d=t(79685),Y=function(x,E){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=W.threshold,e=A===void 0?0:A,te=W.root,I=te===void 0?null:te,y=W.rootMargin,J=y===void 0?"0%":y,D=W.freezeOnceVisible,ce=D===void 0?!1:D,ve=(0,d.useState)(),oe=F()(ve,2),se=oe[0],z=oe[1],M=(se==null?void 0:se.isIntersecting)&&ce,ue=function(q,ee){z(q[0]),x(q,ee)};(0,d.useEffect)(function(){var O=E==null?void 0:E.current,q=!!window.IntersectionObserver;if(!(M||!O)){if(!q){var ee,ae,me={boundingClientRect:(ee=O==null?void 0:O.getBoundingClientRect())!==null&&ee!==void 0?ee:null,intersectionRatio:O?1:0,intersectionRect:(ae=O==null?void 0:O.getBoundingClientRect())!==null&&ae!==void 0?ae:null,isIntersecting:!!O,rootBounds:null,target:O,time:Date.now()};ue([me],null)}var ie=new IntersectionObserver(ue,{threshold:e,root:I,rootMargin:J});return ie.observe(O),function(){return ie.disconnect()}}},[E==null?void 0:E.current,JSON.stringify(e),I,J,M])};k.Z=Y},50475:function(fe,k,t){t.d(k,{Z:function(){return Y}});var c=t(40765),F=t.n(c),d=t(79685);function Y(U){return U!==null&&F()(U)==="object"&&!d.isValidElement(U)?U:{title:U}}}}]);
