"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[954],{76165:function(he,Y,t){t.d(Y,{NL:function(){return e},rJ:function(){return U},ri:function(){return I},v0:function(){return q}});var v=t(12903),S=t.n(v),u=t(32810),W=t.n(u),L=t(5677),g=t.n(L),f=t(53874),U=function(_){return _[_.PENDING=0]="PENDING",_[_.GENERATING=1]="GENERATING",_[_.DONE=2]="DONE",_[_.STOPPED=3]="STOPPED",_}({}),I=S()(function _(m){W()(this,_),g()(this,"id",void 0),g()(this,"assistantId",void 0),g()(this,"createdAt",void 0),g()(this,"title",void 0),g()(this,"prompts",void 0),g()(this,f.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.prompts=m.prompts||[]}),e=S()(function _(m){W()(this,_),g()(this,"id",void 0),g()(this,"assistantId",void 0),g()(this,"createdAt",void 0),g()(this,"title",void 0),g()(this,"messages",void 0),g()(this,f.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.messages=m.messages||[]}),q=S()(function _(m){var z,P;W()(this,_),g()(this,"id",void 0),g()(this,"assistantId",void 0),g()(this,"creator",void 0),g()(this,"createdAt",void 0),g()(this,"content",void 0),g()(this,"status",void 0),g()(this,f.sc,!0),this.id=m.id,this.creator=m.creator,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.content=(z=m.content)!==null&&z!==void 0?z:"",this.status=(P=m.status)!==null&&P!==void 0?P:U.PENDING})},20954:function(he,Y,t){t.d(Y,{Z:function(){return ln}});var v=t(79685),S=t(48651),u=t.n(S),W=t(90554),L=t(28870),g=t(38046),f=t.n(g),U=t(68591),I=t.n(U),e=t(63342),q=["type","className","children"],_="LINE_GRADIENT_ID";function m(n){var r=n.type,i=n.className,d=n.children,s=f()(n,q);return(0,e.jsxs)(L.default,u()(u()({className:I()("dtc__aigc__button",i,"dtc__aigc__button--".concat(r)),ghost:!0},s),{},{children:[(0,e.jsx)("svg",{width:"0",height:"0",children:(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:_,gradientTransform:"rotate(90)",children:[(0,e.jsx)("stop",{offset:"0%",stopColor:"#00bac6"}),(0,e.jsx)("stop",{offset:"50%",stopColor:"#0067ff"}),(0,e.jsx)("stop",{offset:"100%",stopColor:"#450fde"})]})})}),d]}))}var z=t(81930),P=t(45217),H=t(9392),ue=["lineNumberStyle"];function ee(n){var r=n.className,i=n.style,d=n.language,s=n.copy,N=n.value,C=n.convert,B=n.options,R=B===void 0?{}:B,F=R.lineNumberStyle,$=F===void 0?{}:F,k=f()(R,ue),K=(0,v.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:u()({},s||{})}},[s]),V=N||"";return(0,e.jsxs)("div",{className:I()("dtc__aigc__codeblock",C&&"dtc__aigc__codeblock--convert",r),style:i,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:d.toLocaleLowerCase()}),(0,e.jsx)("div",{className:"dtc__aigc__codeblock__tool",children:!K.disabled&&(0,e.jsx)(H.Z,u()({text:V},K.options))})]}),(0,e.jsx)(z.Z,u()(u()({language:d.toLocaleLowerCase(),wrapLines:!0,style:u()(u()({},P.Yn),{},{'code[class*="language-"]':u()(u()({},P.Yn['code[class*="language-"]']),{},{background:C?"#F9F9FA":"#fff"}),'pre[class*="language-"]':u()(u()({},P.Yn['pre[class*="language-"]']),{},{background:C?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:u()({fontStyle:"normal"},$),showLineNumbers:!0},k),{},{children:V}))]})}var te=t(86516),T=t.n(te),E=t(76165),Z=["className"],M=["className"],J=["className"],Q=["className"],re=["className"],de=["className"];function X(n){var r=n.className,i=f()(n,Z);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1259_37039)",fillRule:"evenodd",d:"M8.5 3.5a.5.5 0 00-1 0V4H4.75a1 1 0 00-1 1v7a1 1 0 001 1h6.5a1 1 0 001-1V5a1 1 0 00-1-1H8.5v-.5zm2.75 8.5V5h-6.5v7h6.5zM7 8.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM3 7a.5.5 0 00-1 0v3a.5.5 0 001 0V7zm-2 .5a.5.5 0 01.5.5v1a.5.5 0 01-1 0V8a.5.5 0 01.5-.5zm14.5.5a.5.5 0 00-1 0v1a.5.5 0 001 0V8zm-2-1.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0V7a.5.5 0 01.5-.5zM9.75 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1259_37039",x1:"0.5",x2:"16.294",y1:"3",y2:"11.529",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function ge(n){var r=n.className,i=f()(n,M);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",r)},i),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.495 4.209a6.609 6.609 0 00-5.452-2.87 6.621 6.621 0 00-6.617 6.626 6.621 6.621 0 006.617 6.625 6.62 6.62 0 006.208-4.324.5.5 0 10-.938-.347 5.62 5.62 0 01-5.27 3.67 5.621 5.621 0 01-5.617-5.624A5.621 5.621 0 018.043 2.34a5.61 5.61 0 014.731 2.59l-.003.003L11.304 6.4h3.446V2.955L13.495 4.21z",clipRule:"evenodd"})})}))}function O(n){var r=n.className,i=f()(n,J);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",r)},i),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.332 7.999a6.666 6.666 0 016.667-6.667 6.666 6.666 0 016.666 6.667A6.666 6.666 0 018 14.665 6.666 6.666 0 011.332 8zm12.333 0A5.666 5.666 0 008 2.332a5.665 5.665 0 00-5.667 5.667 5.666 5.666 0 005.667 5.666A5.666 5.666 0 0013.665 8zM6.972 6.125a.5.5 0 01.5.5v2.747a.5.5 0 01-1 0V6.625a.5.5 0 01.5-.5zm2.553.5a.5.5 0 10-1 0v2.747a.5.5 0 001 0V6.625z",clipRule:"evenodd"})})}))}function ve(n){var r=n.className,i=f()(n,Q);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 268 265",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1290_3143)",fillOpacity:"0.03",fillRule:"evenodd",d:"M210.656 14.094c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.156 5.89-13.156 13.156V27.25h-72.36c-14.532 0-26.312 11.78-26.312 26.313V237.75c0 14.532 11.78 26.313 26.312 26.313h171.032c14.532 0 26.312-11.781 26.312-26.313V53.562c0-14.531-11.78-26.312-26.312-26.312h-72.36V14.094zm72.36 39.468H111.984V237.75h171.032V53.562zm-111.828 85.516c0 10.899-8.836 19.735-19.735 19.735s-19.734-8.836-19.734-19.735 8.835-19.734 19.734-19.734c10.899 0 19.735 8.835 19.735 19.734zm-105.25-32.89c0-7.267-5.89-13.157-13.157-13.157-7.266 0-13.156 5.89-13.156 13.157v78.937c0 7.266 5.89 13.156 13.156 13.156 7.266 0 13.157-5.89 13.157-13.156v-78.937zm-52.626 13.156c7.266 0 13.157 5.89 13.157 13.156v26.313c0 7.266-5.89 13.156-13.157 13.156-7.265 0-13.156-5.89-13.156-13.156V132.5c0-7.266 5.89-13.156 13.156-13.156zM394.844 132.5c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.157 5.89-13.157 13.156v26.313c0 7.266 5.891 13.156 13.157 13.156s13.156-5.89 13.156-13.156V132.5zm-52.625-39.469c7.266 0 13.156 5.89 13.156 13.157v78.937c0 7.266-5.89 13.156-13.156 13.156-7.266 0-13.156-5.89-13.156-13.156v-78.937c0-7.267 5.89-13.157 13.156-13.157zm-98.672 65.782c10.899 0 19.734-8.836 19.734-19.735s-8.835-19.734-19.734-19.734c-10.899 0-19.734 8.835-19.734 19.734 0 10.899 8.835 19.735 19.734 19.735z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1290_3143",x1:"0.156",x2:"415.745",y1:"0.938",y2:"225.356",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function me(n){var r=n.className,i=f()(n,re);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"currentColor",d:"M13.07 1.662a.547.547 0 11.86.676l-6.884 8.765v3.147a.547.547 0 01-.507.545l-.04.002a.547.547 0 01-.546-.547v-3.336c0-.123.041-.241.117-.338l7-8.914z"}),(0,e.jsx)("path",{fill:"currentColor",d:"M13.488 1.271a.547.547 0 01.804.548L12.81 13.57a.547.547 0 01-.799.415l-3.81-2.027a.547.547 0 11.513-.965l3.11 1.654 1.25-9.902-9.92 5.425 2.169 1.149c.255.135.36.442.245.702l-.018.037a.547.547 0 01-.739.227L1.744 8.661a.547.547 0 01-.006-.963l11.75-6.427z"})]})}))}var ye=function(r){var i=r.className,d=f()(r,de);return(0,e.jsx)("span",u()(u()({className:I()("dtc__icon",i)},d),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,e.jsx)("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:(0,e.jsx)("g",{transform:"translate(-340 -367)",children:(0,e.jsx)("g",{transform:"translate(201 320)",children:(0,e.jsx)("g",{transform:"translate(139 47)",children:(0,e.jsx)("path",{fill:"currentColor",d:"M11 1.5A1.5 1.5 0 0112.5 3v.25h.5a1.5 1.5 0 011.5 1.5v8a1.5 1.5 0 01-1.5 1.5H5a1.5 1.5 0 01-1.5-1.5v-.25H3a1.5 1.5 0 01-1.493-1.356L1.5 11V3A1.5 1.5 0 013 1.5zm1.5 9.5a1.5 1.5 0 01-1.5 1.5H4.5v.25a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-8a.5.5 0 00-.5-.5h-.5zM11 2.5H3a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h8a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5zm-4 1a.5.5 0 01.5.5v2.5H10a.5.5 0 110 1H7.5V10a.5.5 0 11-1 0V7.5H4a.5.5 0 010-1h2.5V4a.5.5 0 01.5-.5z"})})})})})})}))},Te=t(88289),je=t(4125),Me=t(80244),Ce=t(59058),Ae=t(58351);function De(n){return n.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:n.children})}var $e=t(70300),Ue=t.n($e),ze=t(50459),we=t(71877),Ve=["typing","className","rehypePlugins","remarkPlugins","components","children","onMount"],Ee=(0,v.memo)(function(r){var i=r.typing,d=r.className,s=r.rehypePlugins,N=s===void 0?[]:s,C=r.remarkPlugins,B=C===void 0?[]:C,R=r.components,F=r.children,$=r.onMount,k=f()(r,Ve);return(0,v.useEffect)(function(){$==null||$()},[]),(0,e.jsx)(ze.D,u()(u()({className:I()("dtc__aigc__markdown",i&&"dtc__aigc__markdown--blink",d),rehypePlugins:N,remarkPlugins:[we.Z].concat(Ue()(B)),components:u()({code:function(V){var oe=V.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:oe})},pre:function(V){var oe=V.children,y=oe[0],ae=/language-(\w+)/.exec(y.props.className||""),ie=ae?ae[1]:"SQL",se=String(y.props.children).replace(/\n$/,"");return(0,e.jsx)(ee,{value:se,language:ie})}},R)},k),{},{children:F}))},function(n,r){return!(n.typing!==r.typing||n.className!==r.className||n.children!==r.children)}),Ge=t(49604),We=t(52399);function Oe(n){var r=n.current,i=n.total,d=n.onChange,s=n.style,N=n.disabled,C=r===1||N,B=r===i||N;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:s,children:[(0,e.jsx)(Ge.Z,{className:C?"arrow-disabled":"",onClick:function(){C||d(r-1)}}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:i})]}),(0,e.jsx)(We.Z,{className:B?"arrow-disabled":"",onClick:function(){B||d(r+1)}})]})}var Be=v.createContext({chat:void 0,maxRegenerateCount:5});function xe(){return v.useContext(Be)}var He=["formatText","style"];function Se(n){var r=n.data,i=n.regenerate,d=n.copy,s=n.onRegenerate,N=n.onStop,C=n.onLazyRendered,B=(0,v.useRef)(null),R=xe(),F=R.components,$=F===void 0?{}:F,k=(0,v.useState)(!1),K=T()(k,2),V=K[0],oe=K[1],y=(0,v.useRef)(function(){}),ae=function(p){var b=T()(p,1),ne=b[0];ne.isIntersecting&&oe(function(pe){if(!pe){var ce=function(){return new Promise(function(cn){y.current=cn})};C==null||C(ce)}return!0})};(0,Ae.Z)(ae,B);var ie=(0,v.useState)(r.length),se=T()(ie,2),fe=se[0],G=se[1],h=r[fe-1],le=(0,v.useMemo)(function(){return h?[h.status===E.rJ.GENERATING,h.status===E.rJ.PENDING,h.status===E.rJ.STOPPED]:[!1,!1,!1]},[h]),D=T()(le,3),A=D[0],a=D[1],o=D[2];(0,v.useEffect)(function(){G(r.length)},[r.length]);var c=(0,v.useMemo)(function(){return Object.keys($).reduce(function(j,p){var b=$[p];return j[p]=function(){for(var ne=arguments.length,pe=new Array(ne),ce=0;ce<ne;ce++)pe[ce]=arguments[ce];return typeof b=="function"?b.apply(void 0,pe.concat([{messageId:h==null?void 0:h.id}])):b},j},{})},[$,h==null?void 0:h.id]),l=(0,v.useMemo)(function(){return typeof d=="boolean"?{disabled:d,options:{}}:{disabled:!1,options:u()({},d||{})}},[d]),x=function(){var p;if(l.disabled)return null;var b=l.options,ne=b.formatText,pe=b.style,ce=f()(b,He),be=(p=ne==null?void 0:ne(h==null?void 0:h.content))!==null&&p!==void 0?p:h==null?void 0:h.content;return be?(0,e.jsx)(H.Z,u()({className:"dtc__message__icon",button:(0,e.jsx)(ye,{}),text:be,style:u()({fontSize:16},pe)},ce)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(X,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:I()("dtc__message__content",a&&"dtc__message__content--loading"),ref:B,children:[(0,e.jsx)(De,{loading:a,children:V&&(0,e.jsx)(Ee,{typing:A,components:c,onMount:function(){y.current()},children:h==null?void 0:h.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[r.length>1&&!A&&!a&&(0,e.jsx)(Oe,{current:fe,total:r.length,onChange:function(p){return G(p)}}),o&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(A||a)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(L.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return N==null?void 0:N(h)},icon:(0,e.jsx)(O,{style:{fontSize:16,display:"inline-flex"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!A&&!a&&(0,e.jsxs)(je.default,{className:"dtc__message__iconGroup",children:[x(),i&&(0,e.jsx)(Ce.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(p){return p.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return s==null?void 0:s(h)},children:(0,e.jsx)(ge,{style:{fontSize:16}})})})]})]})}function Le(n){var r=n.content,i=n.className,d=xe(),s=d.components,N=s===void 0?{}:s;return(0,e.jsx)("section",{className:I()("dtc__prompt__container",i),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Ee,{components:N,children:r||""})})})})}var Fe=(0,v.forwardRef)(function(n,r){var i,d,s=n.data,N=n.placeholder,C=n.robotIcon,B=C===void 0?!0:C,R=n.scrollable,F=R===void 0?!0:R,$=n.onRegenerate,k=n.onStop,K=xe(),V=K.maxRegenerateCount,oe=K.copy,y=(0,v.useRef)(null),ae=(0,v.useState)(!0),ie=T()(ae,2),se=ie[0],fe=ie[1],G=(0,v.useRef)(0);(0,v.useImperativeHandle)(r,function(){return{nativeElement:y.current,scrollToBottom:function(){G.current=window.requestAnimationFrame(function(){var a,o;(a=y.current)===null||a===void 0||a.scrollTo({top:(o=y.current)===null||o===void 0?void 0:o.scrollHeight,left:0,behavior:"instant"})})}}});var h=function(){if(!y.current)return!1;var a=5,o=y.current,c=o.scrollTop,l=o.clientHeight,x=o.scrollHeight;return c+l>=x-a},le=!!(Array.isArray(s)&&s.length),D=le?(i=s.at(-1))===null||i===void 0||(d=i.messages)===null||d===void 0?void 0:d.at(-1):void 0;return(0,v.useLayoutEffect)(function(){var A,a=function(){y.current&&fe(h())};return(A=y.current)===null||A===void 0||A.addEventListener("scroll",a),function(){var o;(o=y.current)===null||o===void 0||o.removeEventListener("scroll",a),window.cancelAnimationFrame(G.current)}},[]),(0,v.useLayoutEffect)(function(){G.current=window.requestAnimationFrame(function(){y.current&&(le?y.current.scrollTop=y.current.scrollHeight:y.current.scrollTop=0)})},[D==null?void 0:D.id]),(0,v.useLayoutEffect)(function(){G.current=window.requestAnimationFrame(function(){y.current&&(D==null?void 0:D.status)===E.rJ.GENERATING&&se&&(y.current.scrollTop=y.current.scrollHeight)})},[D==null?void 0:D.status,D==null?void 0:D.content,se]),(0,e.jsx)("div",{className:I()("dtc__aigc__content__container",!F&&"dtc__aigc__content__container--disabled",le&&F&&"dtc__aigc__content__container--valid"),ref:y,children:le?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:s.map(function(A,a){return(0,e.jsxs)(v.Fragment,{children:[(0,e.jsx)(Le,{content:A.title}),(0,e.jsx)(Se,{data:A.messages,regenerate:a===s.length-1&&A.messages.length<V,copy:oe,onRegenerate:function(c){return $==null?void 0:$(c,A)},onStop:function(c){return k==null?void 0:k(c,A)},onLazyRendered:function(c){var l=h();c().then(function(){window.requestAnimationFrame(function(){fe(l),l&&y.current&&(y.current.scrollTop=y.current.scrollHeight)})})}})]},A.id)})}):(0,e.jsxs)(v.Fragment,{children:[N,B&&(0,e.jsx)(ve,{style:{fontSize:200,position:"absolute",right:0,bottom:-100}})]})})}),Ke=Fe,un=t(83345),Ye=t(50425),Ze=["onChange","onPressEnter","onPressShiftEnter","className"];function Je(n){var r=n.onChange,i=n.onPressEnter,d=n.onPressShiftEnter,s=n.className,N=f()(n,Ze),C=function(R){r==null||r(R.target.value)};return(0,e.jsx)(Ye.default.TextArea,u()(u()({className:I()("aigc-textarea",s)},N),{},{onChange:C,onPressEnter:function(R){R.persist(),R.preventDefault(),R.shiftKey?(r==null||r(N.value+`
`),d==null||d(R)):i==null||i(R)},autoSize:{minRows:1,maxRows:8}}))}var Qe=t(12903),Ne=t.n(Qe),Xe=t(32810),Pe=t.n(Xe),ke=t(89822),Ie=t.n(ke),qe=t(38832),Re=t.n(qe),_e=t(53874),en=t(18411),nn=function(n){Ie()(i,n);var r=Re()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ne()(i)}(E.ri),tn=function(n){Ie()(i,n);var r=Re()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ne()(i)}(E.NL),rn=function(n){Ie()(i,n);var r=Re()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ne()(i)}(E.v0),on=function(r){return(r+1)%1e6};function sn(n){var r=(0,v.useReducer)(on,0),i=T()(r,2),d=i[1],s=(0,v.useRef)(void 0),N=(0,en.Z)({onTyping:function(o){G(C.current.promptId,C.current.messageId,{content:o})}}),C=(0,v.useRef)({promptId:"",messageId:""});function B(a,o){N.start(),G(a,o,{status:E.rJ.PENDING}),C.current={promptId:a,messageId:o}}function R(a,o,c){if(a===C.current.promptId&&o===C.current.messageId){var l;N.push(c),((l=h(a,o))===null||l===void 0?void 0:l.status)!==E.rJ.GENERATING&&G(a,o,{status:E.rJ.GENERATING})}}function F(a,o){N.close().then(function(){G(a,o,{status:E.rJ.DONE})})}function $(a){var o,c=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Conversation)||nn;s.current=new c(a),d()}function k(){s.current=void 0,d()}function K(a){s&&(s.current=(0,_e.Uy)(s.current,function(o){Object.assign(o,a)}),d())}function V(){return s.current}function oe(){for(var a,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];if(s.current){var x=(n==null||(a=n.ctor)===null||a===void 0?void 0:a.Prompt)||tn;s.current=(0,_e.Uy)(s.current,function(j){var p;(p=j.prompts)===null||p===void 0||p.push(new x(c[0]))}),d()}}function y(a){s.current&&(s.current=(0,_e.Uy)(s.current,function(o){var c,l,x=(c=o.prompts)===null||c===void 0?void 0:c.findIndex(function(j){return j.id===a});x!==-1&&((l=o.prompts)===null||l===void 0||l.splice(x,1))}),d())}function ae(a,o){s.current&&(s.current=(0,_e.Uy)(s.current,function(c){var l=c.prompts.find(function(x){return x.id===a});l&&(typeof o=="function"?Object.assign(l,o(l)):Object.assign(l,o))}),d())}function ie(a){var o,c;return(o=s.current)===null||o===void 0||(c=o.prompts)===null||c===void 0?void 0:c.find(function(l){return typeof a=="function"?a(l):l.id===a})}function se(a){for(var o,c=arguments.length,l=new Array(c>1?c-1:0),x=1;x<c;x++)l[x-1]=arguments[x];if(s.current){var j=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Message)||rn;s.current=(0,_e.Uy)(s.current,function(p){var b=p.prompts.find(function(ne){return ne.id===a});b&&b.messages.push(new j(l[0]))}),d()}}function fe(a,o){s.current&&(s.current=(0,_e.Uy)(s.current,function(c){var l,x,j=c.prompts.find(function(b){return b.id===a});if(j){var p=(l=j.messages)===null||l===void 0?void 0:l.findIndex(function(b){return b.id===o});p!==-1&&((x=j.messages)===null||x===void 0||x.splice(p,1))}}),d())}function G(a,o,c){s.current&&(s.current=(0,_e.Uy)(s.current,function(l){var x,j=l.prompts.find(function(b){return b.id===a}),p=j==null||(x=j.messages)===null||x===void 0?void 0:x.find(function(b){return b.id===o});p&&(typeof c=="function"?Object.assign(p,c(p)):Object.assign(p,c))}),d())}function h(a,o){var c,l,x,j;return(c=s.current)===null||c===void 0||(l=c.prompts)===null||l===void 0||(x=l.find(function(p){return p.id===a}))===null||x===void 0||(j=x.messages)===null||j===void 0?void 0:j.find(function(p){return p.id===o})}function le(){var a,o,c,l=(a=s.current)===null||a===void 0||(o=a.prompts.at(-1))===null||o===void 0||(c=o.messages)===null||c===void 0?void 0:c.at(-1);return l?l.status===E.rJ.PENDING||l.status===E.rJ.GENERATING:!1}function D(){return V()}function A(a){s.current=a,d()}return{conversation:{create:$,remove:k,update:K,get:V},prompt:{create:oe,remove:y,update:ae,get:ie},message:{create:se,remove:fe,update:G,get:h},loading:le,start:B,push:R,close:F,stop:N.stop,isTyping:N.isTyping,saveViewState:D,restoreViewState:A}}var an=5;function w(n){var r=n.chat,i=n.components,d=n.maxRegenerateCount,s=d===void 0?an:d,N=n.copy,C=n.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:i,maxRegenerateCount:s,copy:N},children:C})}w.useChat=sn,w.useContext=xe,w.Loading=De,w.Button=m,w.CodeBlock=ee,w.Input=Je,w.Markdown=Ee,w.Pagination=Oe,w.Message=Se,w.Prompt=Le,w.Content=Ke,w.Icon={SendIcon:me};var ln=w},9392:function(he,Y,t){t.d(Y,{Z:function(){return ee}});var v=t(48651),S=t.n(v),u=t(80244),W=t(59058),L=t(86516),g=t.n(L),f=t(71089),U=t(75020),I=t(79685),e=t(68591),q=t.n(e),_=t(16777),m=t.n(_),z=t(50475),P=t(63342),H=function(){return(0,P.jsx)("span",{className:"dtc-copy__default-icon",children:(0,P.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:(0,P.jsx)("path",{d:"M704 96a96 96 0 0 1 96 96v16h32a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H320a96 96 0 0 1-96-96v-16h-32a96 96 0 0 1-95.936-92.4L96 704V192a96 96 0 0 1 96-96z m96 608a96 96 0 0 1-96 96H288v16a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32h-32z m-96-544H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32z m-256 64a32 32 0 0 1 32 32v160h160a32 32 0 1 1 0 64H480v160a32 32 0 1 1-64 0V480H256a32 32 0 1 1 0-64h160V256a32 32 0 0 1 32-32z"})})})},ue=function(T){var E=T.button,Z=E===void 0?(0,P.jsx)(H,{}):E,M=T.text,J=T.tooltip,Q=J===void 0?"\u590D\u5236":J,re=T.style,de=T.className,X=T.onCopy,ge=X===void 0?function(){return U.default.success("\u590D\u5236\u6210\u529F")}:X,O=m()(),ve=g()(O,2),me=ve[0],ye=ve[1],Te=function(){ye(M),ge(M)},je=function(){return(0,P.jsx)("span",{className:q()(["dtc-copy",de]),style:re,onClick:function(){return Te()},children:Z})},Me=(0,z.Z)(Q);return(0,P.jsx)(W.default,S()(S()({},Me),{},{children:je()}))},ee=ue},58351:function(he,Y,t){var v=t(86516),S=t.n(v),u=t(79685),W=function(g,f){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},I=U.threshold,e=I===void 0?0:I,q=U.root,_=q===void 0?null:q,m=U.rootMargin,z=m===void 0?"0%":m,P=U.freezeOnceVisible,H=P===void 0?!1:P,ue=(0,u.useState)(),ee=S()(ue,2),te=ee[0],T=ee[1],E=(te==null?void 0:te.isIntersecting)&&H,Z=function(J,Q){T(J[0]),g(J,Q)};(0,u.useEffect)(function(){var M=f==null?void 0:f.current,J=!!window.IntersectionObserver;if(!(E||!M)){if(!J){var Q,re,de={boundingClientRect:(Q=M==null?void 0:M.getBoundingClientRect())!==null&&Q!==void 0?Q:null,intersectionRatio:M?1:0,intersectionRect:(re=M==null?void 0:M.getBoundingClientRect())!==null&&re!==void 0?re:null,isIntersecting:!!M,rootBounds:null,target:M,time:Date.now()};Z([de],null)}var X=new IntersectionObserver(Z,{threshold:e,root:_,rootMargin:z});return X.observe(M),function(){return X.disconnect()}}},[f==null?void 0:f.current,JSON.stringify(e),_,z,E])};Y.Z=W},18411:function(he,Y,t){t.d(Y,{Z:function(){return I}});var v=t(22786),S=t.n(v),u=t(46299),W=t.n(u),L=t(86516),g=t.n(L),f=t(79685),U=50;function I(e){var q=e.onTyping,_=(0,f.useRef)(),m=(0,f.useRef)(""),z=(0,f.useRef)(1),P=(0,f.useRef)(0),H=(0,f.useRef)(!1),ue=(0,f.useState)(!1),ee=g()(ue,2),te=ee[0],T=ee[1],E=(0,f.useRef)(!1),Z=(0,f.useRef)(0);function M(){var O=m.current.length-P.current-1,ve=1e3/U;z.current=Math.ceil(O/ve)}function J(){_.current||(_.current=window.setInterval(function(){if(P.current<m.current.length){var O=m.current;q(O.slice(0,P.current+z.current)),P.current+=z.current}else H.current||(window.clearInterval(_.current),_.current=0,T(!1),E.current=!1)},U))}(0,f.useEffect)(function(){return function(){window.clearInterval(_.current),window.clearInterval(Z.current),_.current=0}},[]);function Q(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";H.current=!0,T(!0),window.clearInterval(_.current),_.current=0,m.current=O,P.current=O.length}function re(O){H.current&&(O.startsWith("n")&&m.current.endsWith("\\")?m.current=m.current.slice(0,-1)+`
`+O.slice(1).replace(/\\n/g,`
`):m.current+=O.replace(/\\n/g,`
`),M(),J())}function de(){return X.apply(this,arguments)}function X(){return X=W()(S()().mark(function O(){return S()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return H.current=!1,E.current=!0,window.clearInterval(Z.current),me.abrupt("return",new Promise(function(ye){Z.current=window.setInterval(function(){E.current||(ye(),E.current=!0,window.clearInterval(Z.current))},1e3)}));case 4:case"end":return me.stop()}},O)})),X.apply(this,arguments)}function ge(){H.current=!1,T(!1),E.current=!1,_.current&&(window.clearInterval(_.current),_.current=0),m.current="",P.current=0}return{start:Q,push:re,close:de,stop:ge,isTyping:te}}},50475:function(he,Y,t){t.d(Y,{Z:function(){return W}});var v=t(40765),S=t.n(v),u=t(79685);function W(L){return L!==null&&S()(L)==="object"&&!u.isValidElement(L)?L:{title:L}}}}]);
