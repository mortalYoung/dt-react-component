"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[954],{76165:function(he,Y,t){t.d(Y,{NL:function(){return R},rJ:function(){return $},ri:function(){return te},v0:function(){return e}});var v=t(12903),S=t.n(v),u=t(32810),W=t.n(u),B=t(5677),y=t.n(B),f=t(53874),$=function(_){return _[_.PENDING=0]="PENDING",_[_.GENERATING=1]="GENERATING",_[_.DONE=2]="DONE",_[_.STOPPED=3]="STOPPED",_}({}),te=S()(function _(m){W()(this,_),y()(this,"id",void 0),y()(this,"assistantId",void 0),y()(this,"createdAt",void 0),y()(this,"title",void 0),y()(this,"prompts",void 0),y()(this,f.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.prompts=m.prompts||[]}),R=S()(function _(m){W()(this,_),y()(this,"id",void 0),y()(this,"assistantId",void 0),y()(this,"createdAt",void 0),y()(this,"title",void 0),y()(this,"messages",void 0),y()(this,f.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.messages=m.messages||[]}),e=S()(function _(m){var U,I;W()(this,_),y()(this,"id",void 0),y()(this,"assistantId",void 0),y()(this,"creator",void 0),y()(this,"createdAt",void 0),y()(this,"content",void 0),y()(this,"status",void 0),y()(this,f.sc,!0),this.id=m.id,this.creator=m.creator,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.content=(U=m.content)!==null&&U!==void 0?U:"",this.status=(I=m.status)!==null&&I!==void 0?I:$.PENDING})},20954:function(he,Y,t){t.d(Y,{Z:function(){return un}});var v=t(79685),S=t(48651),u=t.n(S),W=t(90554),B=t(28870),y=t(38046),f=t.n(y),$=t(94046),te=t(68591),R=t.n(te),e=t(63342),_=["type","className","children"],m="LINE_GRADIENT_ID",U="HOVER_LINE_GRADIENT_ID",I="CONTAINER_ID";function Z(n){var r=n.type,i=n.className,d=n.children,s=f()(n,_);return(0,v.useEffect)(function(){if(!document.querySelector("#".concat(I))){var h=document.createElement("span");h.id=I,h.innerHTML=(0,$.Dq)((0,e.jsx)("svg",{width:"0",height:"0",children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:m,gradientTransform:"rotate(90)",children:[(0,e.jsx)("stop",{offset:"0%",stopColor:"#00bac6"}),(0,e.jsx)("stop",{offset:"50%",stopColor:"#0067ff"}),(0,e.jsx)("stop",{offset:"100%",stopColor:"#450fde"})]}),(0,e.jsxs)("linearGradient",{id:U,gradientTransform:"rotate(90)",children:[(0,e.jsx)("stop",{offset:"0%",stopColor:"#08c4ff"}),(0,e.jsx)("stop",{offset:"50%",stopColor:"#4892ff"}),(0,e.jsx)("stop",{offset:"100%",stopColor:"#8a61ff"})]})]})})),document.body.append(h)}},[]),(0,e.jsxs)(B.default,u()(u()({className:R()("dtc__aigc__button",i,"dtc__aigc__button--".concat(r)),ghost:!0},s),{},{children:[d,r==="secondary"&&!s.disabled&&(0,e.jsx)("span",{className:"dtc__aigc__mask--secondary"})]}))}var ue=t(81930),J=t(45217),ee=t(9392),z=["lineNumberStyle"];function w(n){var r=n.className,i=n.style,d=n.language,s=n.copy,h=n.value,E=n.convert,O=n.options,T=O===void 0?{}:O,F=T.lineNumberStyle,L=F===void 0?{}:F,q=f()(T,z),K=(0,v.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:u()({},s||{})}},[s]),G=h||"";return(0,e.jsxs)("div",{className:R()("dtc__aigc__codeblock",E&&"dtc__aigc__codeblock--convert",r),style:i,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:d.toLocaleLowerCase()}),(0,e.jsx)("div",{className:"dtc__aigc__codeblock__tool",children:!K.disabled&&(0,e.jsx)(ee.Z,u()({text:G},K.options))})]}),(0,e.jsx)(ue.Z,u()(u()({language:d.toLocaleLowerCase(),wrapLines:!0,style:u()(u()({},J.Yn),{},{'code[class*="language-"]':u()(u()({},J.Yn['code[class*="language-"]']),{},{background:E?"#F9F9FA":"#fff"}),'pre[class*="language-"]':u()(u()({},J.Yn['pre[class*="language-"]']),{},{background:E?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:u()({fontStyle:"normal"},L),showLineNumbers:!0},q),{},{children:G}))]})}var Q=t(86516),N=t.n(Q),P=t(76165),X=["className"],re=["className"],de=["className"],k=["className"],ge=["className"],D=["className"];function ve(n){var r=n.className,i=f()(n,X);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1259_37039)",fillRule:"evenodd",d:"M8.5 3.5a.5.5 0 00-1 0V4H4.75a1 1 0 00-1 1v7a1 1 0 001 1h6.5a1 1 0 001-1V5a1 1 0 00-1-1H8.5v-.5zm2.75 8.5V5h-6.5v7h6.5zM7 8.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM3 7a.5.5 0 00-1 0v3a.5.5 0 001 0V7zm-2 .5a.5.5 0 01.5.5v1a.5.5 0 01-1 0V8a.5.5 0 01.5-.5zm14.5.5a.5.5 0 00-1 0v1a.5.5 0 001 0V8zm-2-1.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0V7a.5.5 0 01.5-.5zM9.75 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1259_37039",x1:"0.5",x2:"16.294",y1:"3",y2:"11.529",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function me(n){var r=n.className,i=f()(n,re);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",r)},i),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.495 4.209a6.609 6.609 0 00-5.452-2.87 6.621 6.621 0 00-6.617 6.626 6.621 6.621 0 006.617 6.625 6.62 6.62 0 006.208-4.324.5.5 0 10-.938-.347 5.62 5.62 0 01-5.27 3.67 5.621 5.621 0 01-5.617-5.624A5.621 5.621 0 018.043 2.34a5.61 5.61 0 014.731 2.59l-.003.003L11.304 6.4h3.446V2.955L13.495 4.21z",clipRule:"evenodd"})})}))}function ye(n){var r=n.className,i=f()(n,de);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",r)},i),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.332 7.999a6.666 6.666 0 016.667-6.667 6.666 6.666 0 016.666 6.667A6.666 6.666 0 018 14.665 6.666 6.666 0 011.332 8zm12.333 0A5.666 5.666 0 008 2.332a5.665 5.665 0 00-5.667 5.667 5.666 5.666 0 005.667 5.666A5.666 5.666 0 0013.665 8zM6.972 6.125a.5.5 0 01.5.5v2.747a.5.5 0 01-1 0V6.625a.5.5 0 01.5-.5zm2.553.5a.5.5 0 10-1 0v2.747a.5.5 0 001 0V6.625z",clipRule:"evenodd"})})}))}function je(n){var r=n.className,i=f()(n,k);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 268 265",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1290_3143)",fillOpacity:"0.03",fillRule:"evenodd",d:"M210.656 14.094c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.156 5.89-13.156 13.156V27.25h-72.36c-14.532 0-26.312 11.78-26.312 26.313V237.75c0 14.532 11.78 26.313 26.312 26.313h171.032c14.532 0 26.312-11.781 26.312-26.313V53.562c0-14.531-11.78-26.312-26.312-26.312h-72.36V14.094zm72.36 39.468H111.984V237.75h171.032V53.562zm-111.828 85.516c0 10.899-8.836 19.735-19.735 19.735s-19.734-8.836-19.734-19.735 8.835-19.734 19.734-19.734c10.899 0 19.735 8.835 19.735 19.734zm-105.25-32.89c0-7.267-5.89-13.157-13.157-13.157-7.266 0-13.156 5.89-13.156 13.157v78.937c0 7.266 5.89 13.156 13.156 13.156 7.266 0 13.157-5.89 13.157-13.156v-78.937zm-52.626 13.156c7.266 0 13.157 5.89 13.157 13.156v26.313c0 7.266-5.89 13.156-13.157 13.156-7.265 0-13.156-5.89-13.156-13.156V132.5c0-7.266 5.89-13.156 13.156-13.156zM394.844 132.5c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.157 5.89-13.157 13.156v26.313c0 7.266 5.891 13.156 13.157 13.156s13.156-5.89 13.156-13.156V132.5zm-52.625-39.469c7.266 0 13.156 5.89 13.156 13.157v78.937c0 7.266-5.89 13.156-13.156 13.156-7.266 0-13.156-5.89-13.156-13.156v-78.937c0-7.267 5.89-13.157 13.156-13.157zm-98.672 65.782c10.899 0 19.734-8.836 19.734-19.735s-8.835-19.734-19.734-19.734c-10.899 0-19.734 8.835-19.734 19.734 0 10.899 8.835 19.735 19.734 19.735z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1290_3143",x1:"0.156",x2:"415.745",y1:"0.938",y2:"225.356",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function Ce(n){var r=n.className,i=f()(n,ge);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",r)},i),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"currentColor",d:"M13.07 1.662a.547.547 0 11.86.676l-6.884 8.765v3.147a.547.547 0 01-.507.545l-.04.002a.547.547 0 01-.546-.547v-3.336c0-.123.041-.241.117-.338l7-8.914z"}),(0,e.jsx)("path",{fill:"currentColor",d:"M13.488 1.271a.547.547 0 01.804.548L12.81 13.57a.547.547 0 01-.799.415l-3.81-2.027a.547.547 0 11.513-.965l3.11 1.654 1.25-9.902-9.92 5.425 2.169 1.149c.255.135.36.442.245.702l-.018.037a.547.547 0 01-.739.227L1.744 8.661a.547.547 0 01-.006-.963l11.75-6.427z"})]})}))}var Ee=function(r){var i=r.className,d=f()(r,D);return(0,e.jsx)("span",u()(u()({className:R()("dtc__icon",i)},d),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,e.jsx)("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:(0,e.jsx)("g",{transform:"translate(-340 -367)",children:(0,e.jsx)("g",{transform:"translate(201 320)",children:(0,e.jsx)("g",{transform:"translate(139 47)",children:(0,e.jsx)("path",{fill:"currentColor",d:"M11 1.5A1.5 1.5 0 0112.5 3v.25h.5a1.5 1.5 0 011.5 1.5v8a1.5 1.5 0 01-1.5 1.5H5a1.5 1.5 0 01-1.5-1.5v-.25H3a1.5 1.5 0 01-1.493-1.356L1.5 11V3A1.5 1.5 0 013 1.5zm1.5 9.5a1.5 1.5 0 01-1.5 1.5H4.5v.25a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-8a.5.5 0 00-.5-.5h-.5zM11 2.5H3a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h8a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5zm-4 1a.5.5 0 01.5.5v2.5H10a.5.5 0 110 1H7.5V10a.5.5 0 11-1 0V7.5H4a.5.5 0 010-1h2.5V4a.5.5 0 01.5-.5z"})})})})})})}))},Ae=t(88289),Me=t(4125),vn=t(80244),$e=t(59058),Ue=t(58351);function De(n){return n.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:n.children})}var ze=t(70300),we=t.n(ze),Ve=t(50459),Ge=t(71877),He=["typing","className","rehypePlugins","remarkPlugins","components","children","onMount"],Ne=(0,v.memo)(function(r){var i=r.typing,d=r.className,s=r.rehypePlugins,h=s===void 0?[]:s,E=r.remarkPlugins,O=E===void 0?[]:E,T=r.components,F=r.children,L=r.onMount,q=f()(r,He);return(0,v.useEffect)(function(){L==null||L()},[]),(0,e.jsx)(Ve.D,u()(u()({className:R()("dtc__aigc__markdown",i&&"dtc__aigc__markdown--blink",d),rehypePlugins:h,remarkPlugins:[Ge.Z].concat(we()(O)),components:u()({code:function(G){var oe=G.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:oe})},pre:function(G){var oe=G.children,x=oe[0],ae=/language-(\w+)/.exec(x.props.className||""),ie=ae?ae[1]:"SQL",se=String(x.props.children).replace(/\n$/,"");return(0,e.jsx)(w,{value:se,language:ie})}},T)},q),{},{children:F}))},function(n,r){return!(n.typing!==r.typing||n.className!==r.className||n.children!==r.children)}),We=t(49604),Fe=t(52399);function Oe(n){var r=n.current,i=n.total,d=n.onChange,s=n.style,h=n.disabled,E=r===1||h,O=r===i||h;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:s,children:[(0,e.jsx)(We.Z,{className:E?"arrow-disabled":"",onClick:function(){E||d(r-1)}}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:i})]}),(0,e.jsx)(Fe.Z,{className:O?"arrow-disabled":"",onClick:function(){O||d(r+1)}})]})}var Se=v.createContext({chat:void 0,maxRegenerateCount:5});function xe(){return v.useContext(Se)}var Ke=["formatText","style"];function Be(n){var r=n.data,i=n.regenerate,d=n.copy,s=n.onRegenerate,h=n.onStop,E=n.onLazyRendered,O=(0,v.useRef)(null),T=xe(),F=T.components,L=F===void 0?{}:F,q=(0,v.useState)(!1),K=N()(q,2),G=K[0],oe=K[1],x=(0,v.useRef)(function(){}),ae=function(p){var b=N()(p,1),ne=b[0];ne.isIntersecting&&oe(function(pe){if(!pe){var ce=function(){return new Promise(function(dn){x.current=dn})};E==null||E(ce)}return!0})};(0,Ue.Z)(ae,O);var ie=(0,v.useState)(r.length),se=N()(ie,2),fe=se[0],H=se[1],g=r[fe-1],le=(0,v.useMemo)(function(){return g?[g.status===P.rJ.GENERATING,g.status===P.rJ.PENDING,g.status===P.rJ.STOPPED]:[!1,!1,!1]},[g]),M=N()(le,3),A=M[0],a=M[1],o=M[2];(0,v.useEffect)(function(){H(r.length)},[r.length]);var c=(0,v.useMemo)(function(){return Object.keys(L).reduce(function(C,p){var b=L[p];return C[p]=function(){for(var ne=arguments.length,pe=new Array(ne),ce=0;ce<ne;ce++)pe[ce]=arguments[ce];return typeof b=="function"?b.apply(void 0,pe.concat([{messageId:g==null?void 0:g.id}])):b},C},{})},[L,g==null?void 0:g.id]),l=(0,v.useMemo)(function(){return typeof d=="boolean"?{disabled:d,options:{}}:{disabled:!1,options:u()({},d||{})}},[d]),j=function(){var p;if(l.disabled)return null;var b=l.options,ne=b.formatText,pe=b.style,ce=f()(b,Ke),be=(p=ne==null?void 0:ne(g==null?void 0:g.content))!==null&&p!==void 0?p:g==null?void 0:g.content;return be?(0,e.jsx)(ee.Z,u()({className:"dtc__message__icon",button:(0,e.jsx)(Ee,{}),text:be,style:u()({fontSize:16},pe)},ce)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(ve,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:R()("dtc__message__content",a&&"dtc__message__content--loading"),ref:O,children:[(0,e.jsx)(De,{loading:a,children:G&&(0,e.jsx)(Ne,{typing:A,components:c,onMount:function(){x.current()},children:g==null?void 0:g.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[r.length>1&&!A&&!a&&(0,e.jsx)(Oe,{current:fe,total:r.length,onChange:function(p){return H(p)}}),o&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(A||a)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(B.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return h==null?void 0:h(g)},icon:(0,e.jsx)(ye,{style:{fontSize:16,display:"inline-flex"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!A&&!a&&(0,e.jsxs)(Me.default,{className:"dtc__message__iconGroup",children:[j(),i&&(0,e.jsx)($e.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(p){return p.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return s==null?void 0:s(g)},children:(0,e.jsx)(me,{style:{fontSize:16}})})})]})]})}function Le(n){var r=n.content,i=n.className,d=xe(),s=d.components,h=s===void 0?{}:s;return(0,e.jsx)("section",{className:R()("dtc__prompt__container",i),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Ne,{components:h,children:r||""})})})})}var Ye=(0,v.forwardRef)(function(n,r){var i,d,s=n.data,h=n.placeholder,E=n.robotIcon,O=E===void 0?!0:E,T=n.scrollable,F=T===void 0?!0:T,L=n.onRegenerate,q=n.onStop,K=xe(),G=K.maxRegenerateCount,oe=K.copy,x=(0,v.useRef)(null),ae=(0,v.useState)(!0),ie=N()(ae,2),se=ie[0],fe=ie[1],H=(0,v.useRef)(0);(0,v.useImperativeHandle)(r,function(){return{nativeElement:x.current,scrollToBottom:function(){H.current=window.requestAnimationFrame(function(){var a,o;(a=x.current)===null||a===void 0||a.scrollTo({top:(o=x.current)===null||o===void 0?void 0:o.scrollHeight,left:0,behavior:"instant"})})}}});var g=function(){if(!x.current)return!1;var a=5,o=x.current,c=o.scrollTop,l=o.clientHeight,j=o.scrollHeight;return c+l>=j-a},le=!!(Array.isArray(s)&&s.length),M=le?(i=s.at(-1))===null||i===void 0||(d=i.messages)===null||d===void 0?void 0:d.at(-1):void 0;return(0,v.useLayoutEffect)(function(){var A,a=function(){x.current&&fe(g())};return(A=x.current)===null||A===void 0||A.addEventListener("scroll",a),function(){var o;(o=x.current)===null||o===void 0||o.removeEventListener("scroll",a),window.cancelAnimationFrame(H.current)}},[]),(0,v.useLayoutEffect)(function(){H.current=window.requestAnimationFrame(function(){x.current&&(le?x.current.scrollTop=x.current.scrollHeight:x.current.scrollTop=0)})},[M==null?void 0:M.id]),(0,v.useLayoutEffect)(function(){H.current=window.requestAnimationFrame(function(){x.current&&(M==null?void 0:M.status)===P.rJ.GENERATING&&se&&(x.current.scrollTop=x.current.scrollHeight)})},[M==null?void 0:M.status,M==null?void 0:M.content,se]),(0,e.jsx)("div",{className:R()("dtc__aigc__content__container",!F&&"dtc__aigc__content__container--disabled",le&&F&&"dtc__aigc__content__container--valid"),ref:x,children:le?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:s.map(function(A,a){return(0,e.jsxs)(v.Fragment,{children:[(0,e.jsx)(Le,{content:A.title}),(0,e.jsx)(Be,{data:A.messages,regenerate:a===s.length-1&&A.messages.length<G,copy:oe,onRegenerate:function(c){return L==null?void 0:L(c,A)},onStop:function(c){return q==null?void 0:q(c,A)},onLazyRendered:function(c){var l=g();c().then(function(){window.requestAnimationFrame(function(){fe(l),l&&x.current&&(x.current.scrollTop=x.current.scrollHeight)})})}})]},A.id)})}):(0,e.jsxs)(v.Fragment,{children:[h,O&&(0,e.jsx)(je,{style:{fontSize:200,position:"absolute",right:0,bottom:-100}})]})})}),Ze=Ye,mn=t(83345),Je=t(50425),Qe=["onChange","onPressEnter","onPressShiftEnter","className"];function Xe(n){var r=n.onChange,i=n.onPressEnter,d=n.onPressShiftEnter,s=n.className,h=f()(n,Qe),E=function(T){r==null||r(T.target.value)};return(0,e.jsx)(Je.default.TextArea,u()(u()({className:R()("aigc-textarea",s)},h),{},{onChange:E,onPressEnter:function(T){T.persist(),T.preventDefault(),T.shiftKey?(r==null||r(h.value+`
`),d==null||d(T)):i==null||i(T)},autoSize:{minRows:1,maxRows:8}}))}var ke=t(12903),Ie=t.n(ke),qe=t(32810),Pe=t.n(qe),en=t(89822),Re=t.n(en),nn=t(38832),Te=t.n(nn),_e=t(53874),tn=t(18411),rn=function(n){Re()(i,n);var r=Te()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ie()(i)}(P.ri),on=function(n){Re()(i,n);var r=Te()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ie()(i)}(P.NL),sn=function(n){Re()(i,n);var r=Te()(i);function i(){return Pe()(this,i),r.apply(this,arguments)}return Ie()(i)}(P.v0),an=function(r){return(r+1)%1e6};function ln(n){var r=(0,v.useReducer)(an,0),i=N()(r,2),d=i[1],s=(0,v.useRef)(void 0),h=(0,tn.Z)({onTyping:function(o){H(E.current.promptId,E.current.messageId,{content:o})}}),E=(0,v.useRef)({promptId:"",messageId:""});function O(a,o){h.start(),H(a,o,{status:P.rJ.PENDING}),E.current={promptId:a,messageId:o}}function T(a,o,c){if(a===E.current.promptId&&o===E.current.messageId){var l;h.push(c),((l=g(a,o))===null||l===void 0?void 0:l.status)!==P.rJ.GENERATING&&H(a,o,{status:P.rJ.GENERATING})}}function F(a,o){h.close().then(function(){H(a,o,{status:P.rJ.DONE})})}function L(a){var o,c=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Conversation)||rn;s.current=new c(a),d()}function q(){s.current=void 0,d()}function K(a){s&&(s.current=(0,_e.Uy)(s.current,function(o){Object.assign(o,a)}),d())}function G(){return s.current}function oe(){for(var a,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];if(s.current){var j=(n==null||(a=n.ctor)===null||a===void 0?void 0:a.Prompt)||on;s.current=(0,_e.Uy)(s.current,function(C){var p;(p=C.prompts)===null||p===void 0||p.push(new j(c[0]))}),d()}}function x(a){s.current&&(s.current=(0,_e.Uy)(s.current,function(o){var c,l,j=(c=o.prompts)===null||c===void 0?void 0:c.findIndex(function(C){return C.id===a});j!==-1&&((l=o.prompts)===null||l===void 0||l.splice(j,1))}),d())}function ae(a,o){s.current&&(s.current=(0,_e.Uy)(s.current,function(c){var l=c.prompts.find(function(j){return j.id===a});l&&(typeof o=="function"?Object.assign(l,o(l)):Object.assign(l,o))}),d())}function ie(a){var o,c;return(o=s.current)===null||o===void 0||(c=o.prompts)===null||c===void 0?void 0:c.find(function(l){return typeof a=="function"?a(l):l.id===a})}function se(a){for(var o,c=arguments.length,l=new Array(c>1?c-1:0),j=1;j<c;j++)l[j-1]=arguments[j];if(s.current){var C=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Message)||sn;s.current=(0,_e.Uy)(s.current,function(p){var b=p.prompts.find(function(ne){return ne.id===a});b&&b.messages.push(new C(l[0]))}),d()}}function fe(a,o){s.current&&(s.current=(0,_e.Uy)(s.current,function(c){var l,j,C=c.prompts.find(function(b){return b.id===a});if(C){var p=(l=C.messages)===null||l===void 0?void 0:l.findIndex(function(b){return b.id===o});p!==-1&&((j=C.messages)===null||j===void 0||j.splice(p,1))}}),d())}function H(a,o,c){s.current&&(s.current=(0,_e.Uy)(s.current,function(l){var j,C=l.prompts.find(function(b){return b.id===a}),p=C==null||(j=C.messages)===null||j===void 0?void 0:j.find(function(b){return b.id===o});p&&(typeof c=="function"?Object.assign(p,c(p)):Object.assign(p,c))}),d())}function g(a,o){var c,l,j,C;return(c=s.current)===null||c===void 0||(l=c.prompts)===null||l===void 0||(j=l.find(function(p){return p.id===a}))===null||j===void 0||(C=j.messages)===null||C===void 0?void 0:C.find(function(p){return p.id===o})}function le(){var a,o,c,l=(a=s.current)===null||a===void 0||(o=a.prompts.at(-1))===null||o===void 0||(c=o.messages)===null||c===void 0?void 0:c.at(-1);return l?l.status===P.rJ.PENDING||l.status===P.rJ.GENERATING:!1}function M(){return G()}function A(a){s.current=a,d()}return{conversation:{create:L,remove:q,update:K,get:G},prompt:{create:oe,remove:x,update:ae,get:ie},message:{create:se,remove:fe,update:H,get:g},loading:le,start:O,push:T,close:F,stop:h.stop,isTyping:h.isTyping,saveViewState:M,restoreViewState:A}}var cn=5;function V(n){var r=n.chat,i=n.components,d=n.maxRegenerateCount,s=d===void 0?cn:d,h=n.copy,E=n.children;return(0,e.jsx)(Se.Provider,{value:{chat:r,components:i,maxRegenerateCount:s,copy:h},children:E})}V.useChat=ln,V.useContext=xe,V.Loading=De,V.Button=Z,V.CodeBlock=w,V.Input=Xe,V.Markdown=Ne,V.Pagination=Oe,V.Message=Be,V.Prompt=Le,V.Content=Ze,V.Icon={SendIcon:Ce};var un=V},9392:function(he,Y,t){t.d(Y,{Z:function(){return J}});var v=t(48651),S=t.n(v),u=t(80244),W=t(59058),B=t(86516),y=t.n(B),f=t(71089),$=t(75020),te=t(79685),R=t(68591),e=t.n(R),_=t(16777),m=t.n(_),U=t(50475),I=t(63342),Z=function(){return(0,I.jsx)("span",{className:"dtc-copy__default-icon",children:(0,I.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:(0,I.jsx)("path",{d:"M704 96a96 96 0 0 1 96 96v16h32a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H320a96 96 0 0 1-96-96v-16h-32a96 96 0 0 1-95.936-92.4L96 704V192a96 96 0 0 1 96-96z m96 608a96 96 0 0 1-96 96H288v16a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32h-32z m-96-544H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32z m-256 64a32 32 0 0 1 32 32v160h160a32 32 0 1 1 0 64H480v160a32 32 0 1 1-64 0V480H256a32 32 0 1 1 0-64h160V256a32 32 0 0 1 32-32z"})})})},ue=function(z){var w=z.button,Q=w===void 0?(0,I.jsx)(Z,{}):w,N=z.text,P=z.tooltip,X=P===void 0?"\u590D\u5236":P,re=z.style,de=z.className,k=z.onCopy,ge=k===void 0?function(){return $.default.success("\u590D\u5236\u6210\u529F")}:k,D=m()(),ve=y()(D,2),me=ve[0],ye=ve[1],je=function(){ye(N),ge(N)},Ce=function(){return(0,I.jsx)("span",{className:e()(["dtc-copy",de]),style:re,onClick:function(){return je()},children:Q})},Ee=(0,U.Z)(X);return(0,I.jsx)(W.default,S()(S()({},Ee),{},{children:Ce()}))},J=ue},58351:function(he,Y,t){var v=t(86516),S=t.n(v),u=t(79685),W=function(y,f){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=$.threshold,R=te===void 0?0:te,e=$.root,_=e===void 0?null:e,m=$.rootMargin,U=m===void 0?"0%":m,I=$.freezeOnceVisible,Z=I===void 0?!1:I,ue=(0,u.useState)(),J=S()(ue,2),ee=J[0],z=J[1],w=(ee==null?void 0:ee.isIntersecting)&&Z,Q=function(P,X){z(P[0]),y(P,X)};(0,u.useEffect)(function(){var N=f==null?void 0:f.current,P=!!window.IntersectionObserver;if(!(w||!N)){if(!P){var X,re,de={boundingClientRect:(X=N==null?void 0:N.getBoundingClientRect())!==null&&X!==void 0?X:null,intersectionRatio:N?1:0,intersectionRect:(re=N==null?void 0:N.getBoundingClientRect())!==null&&re!==void 0?re:null,isIntersecting:!!N,rootBounds:null,target:N,time:Date.now()};Q([de],null)}var k=new IntersectionObserver(Q,{threshold:R,root:_,rootMargin:U});return k.observe(N),function(){return k.disconnect()}}},[f==null?void 0:f.current,JSON.stringify(R),_,U,w])};Y.Z=W},18411:function(he,Y,t){t.d(Y,{Z:function(){return te}});var v=t(22786),S=t.n(v),u=t(46299),W=t.n(u),B=t(86516),y=t.n(B),f=t(79685),$=50;function te(R){var e=R.onTyping,_=(0,f.useRef)(),m=(0,f.useRef)(""),U=(0,f.useRef)(1),I=(0,f.useRef)(0),Z=(0,f.useRef)(!1),ue=(0,f.useState)(!1),J=y()(ue,2),ee=J[0],z=J[1],w=(0,f.useRef)(!1),Q=(0,f.useRef)(0);function N(){var D=m.current.length-I.current-1,ve=1e3/$;U.current=Math.ceil(D/ve)}function P(){_.current||(_.current=window.setInterval(function(){if(I.current<m.current.length){var D=m.current;e(D.slice(0,I.current+U.current)),I.current+=U.current}else Z.current||(window.clearInterval(_.current),_.current=0,z(!1),w.current=!1)},$))}(0,f.useEffect)(function(){return function(){window.clearInterval(_.current),window.clearInterval(Q.current),_.current=0}},[]);function X(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";Z.current=!0,z(!0),window.clearInterval(_.current),_.current=0,m.current=D,I.current=D.length}function re(D){Z.current&&(D.startsWith("n")&&m.current.endsWith("\\")?m.current=m.current.slice(0,-1)+`
`+D.slice(1).replace(/\\n/g,`
`):m.current+=D.replace(/\\n/g,`
`),N(),P())}function de(){return k.apply(this,arguments)}function k(){return k=W()(S()().mark(function D(){return S()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return Z.current=!1,w.current=!0,window.clearInterval(Q.current),me.abrupt("return",new Promise(function(ye){Q.current=window.setInterval(function(){w.current||(ye(),w.current=!0,window.clearInterval(Q.current))},1e3)}));case 4:case"end":return me.stop()}},D)})),k.apply(this,arguments)}function ge(){Z.current=!1,z(!1),w.current=!1,_.current&&(window.clearInterval(_.current),_.current=0),m.current="",I.current=0}return{start:X,push:re,close:de,stop:ge,isTyping:ee}}},50475:function(he,Y,t){t.d(Y,{Z:function(){return W}});var v=t(40765),S=t.n(v),u=t(79685);function W(B){return B!==null&&S()(B)==="object"&&!u.isValidElement(B)?B:{title:B}}}}]);
