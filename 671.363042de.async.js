"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[671],{90671:function(xe,Q,o){o.d(Q,{Z:function(){return xt}});var u=o(79685),Y=o(48651),v=o.n(Y),ne=o(90554),L=o(28870),ve=o(38046),E=o.n(ve),J=o(68591),A=o.n(J),t=o(63342),re=["type","className","children"],oe="LINE_GRADIENT_ID";function se(e){var n=e.type,r=e.className,i=e.children,a=E()(e,re);return(0,t.jsxs)(L.default,v()(v()({className:A()("dtc__aigc__button",r,"dtc__aigc__button--".concat(n)),ghost:!0},a),{},{children:[(0,t.jsx)("svg",{width:"0",height:"0",children:(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:oe,gradientTransform:"rotate(90)",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#00bac6"}),(0,t.jsx)("stop",{offset:"50%",stopColor:"#0067ff"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#450fde"})]})})}),i]}))}var ae=o(81930),O=o(45217),ie=o(9392),me=["lineNumberStyle"];function X(e){var n=e.className,r=e.style,i=e.language,a=e.copy,m=e.value,f=e.convert,I=e.options,g=I===void 0?{}:I,S=g.lineNumberStyle,j=S===void 0?{}:S,_=E()(g,me),C=(0,u.useMemo)(function(){return typeof a=="boolean"?{disabled:a,options:{}}:{disabled:!1,options:v()({},a||{})}},[a]),M=m||"";return(0,t.jsxs)("div",{className:A()("dtc__aigc__codeblock",f&&"dtc__aigc__codeblock--convert",n),style:r,children:[(0,t.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,t.jsx)("span",{className:"dtc__aigc__codeblock__language",children:i.toLocaleLowerCase()}),(0,t.jsx)("div",{className:"dtc__aigc__codeblock__tool",children:!C.disabled&&(0,t.jsx)(ie.Z,v()({text:M},C.options))})]}),(0,t.jsx)(ae.Z,v()(v()({language:i.toLocaleLowerCase(),wrapLines:!0,style:v()(v()({},O.Yn),{},{'code[class*="language-"]':v()(v()({},O.Yn['code[class*="language-"]']),{},{background:f?"#F9F9FA":"#fff"}),'pre[class*="language-"]':v()(v()({},O.Yn['pre[class*="language-"]']),{},{background:f?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:v()({fontStyle:"normal"},j),showLineNumbers:!0},_),{},{children:M}))]})}var k=o(86516),P=o.n(k),q={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function le(){var e=(0,u.useState)(null),n=P()(e,2),r=n[0],i=n[1],a=(0,u.useState)(q),m=P()(a,2),f=m[0],I=m[1],g=(0,u.useMemo)(function(){return new window.ResizeObserver(function(S){if(S[0]){var j=S[0].contentRect,_=j.x,C=j.y,M=j.width,B=j.height,G=j.top,$=j.left,V=j.bottom,D=j.right;I({x:_,y:C,width:M,height:B,top:G,left:$,bottom:V,right:D})}})},[]);return(0,u.useEffect)(function(){if(r)return g.observe(r),function(){g.disconnect()}},[r]),[i,f]}var w=["className"],Z=["className"],K=["className"],ee=["className"],fe=["className"],te=["className"];function ye(e){var n=e.className,r=E()(e,w);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",n)},r),{},{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,t.jsx)("path",{fill:"url(#paint0_linear_1259_37039)",fillRule:"evenodd",d:"M8.5 3.5a.5.5 0 00-1 0V4H4.75a1 1 0 00-1 1v7a1 1 0 001 1h6.5a1 1 0 001-1V5a1 1 0 00-1-1H8.5v-.5zm2.75 8.5V5h-6.5v7h6.5zM7 8.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM3 7a.5.5 0 00-1 0v3a.5.5 0 001 0V7zm-2 .5a.5.5 0 01.5.5v1a.5.5 0 01-1 0V8a.5.5 0 01.5-.5zm14.5.5a.5.5 0 00-1 0v1a.5.5 0 001 0V8zm-2-1.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0V7a.5.5 0 01.5-.5zM9.75 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_1259_37039",x1:"0.5",x2:"16.294",y1:"3",y2:"11.529",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#00BAC6"}),(0,t.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function Ce(e){var n=e.className,r=E()(e,Z);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",n)},r),{},{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,t.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.495 4.209a6.609 6.609 0 00-5.452-2.87 6.621 6.621 0 00-6.617 6.626 6.621 6.621 0 006.617 6.625 6.62 6.62 0 006.208-4.324.5.5 0 10-.938-.347 5.62 5.62 0 01-5.27 3.67 5.621 5.621 0 01-5.617-5.624A5.621 5.621 0 018.043 2.34a5.61 5.61 0 014.731 2.59l-.003.003L11.304 6.4h3.446V2.955L13.495 4.21z",clipRule:"evenodd"})})}))}function he(e){var n=e.className,r=E()(e,K);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",n)},r),{},{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,t.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.332 7.999a6.666 6.666 0 016.667-6.667 6.666 6.666 0 016.666 6.667A6.666 6.666 0 018 14.665 6.666 6.666 0 011.332 8zm12.333 0A5.666 5.666 0 008 2.332a5.665 5.665 0 00-5.667 5.667 5.666 5.666 0 005.667 5.666A5.666 5.666 0 0013.665 8zM6.972 6.125a.5.5 0 01.5.5v2.747a.5.5 0 01-1 0V6.625a.5.5 0 01.5-.5zm2.553.5a.5.5 0 10-1 0v2.747a.5.5 0 001 0V6.625z",clipRule:"evenodd"})})}))}function Pe(e){var n=e.className,r=E()(e,ee);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",n)},r),{},{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 268 265",children:[(0,t.jsx)("path",{fill:"url(#paint0_linear_1290_3143)",fillOpacity:"0.03",fillRule:"evenodd",d:"M210.656 14.094c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.156 5.89-13.156 13.156V27.25h-72.36c-14.532 0-26.312 11.78-26.312 26.313V237.75c0 14.532 11.78 26.313 26.312 26.313h171.032c14.532 0 26.312-11.781 26.312-26.313V53.562c0-14.531-11.78-26.312-26.312-26.312h-72.36V14.094zm72.36 39.468H111.984V237.75h171.032V53.562zm-111.828 85.516c0 10.899-8.836 19.735-19.735 19.735s-19.734-8.836-19.734-19.735 8.835-19.734 19.734-19.734c10.899 0 19.735 8.835 19.735 19.734zm-105.25-32.89c0-7.267-5.89-13.157-13.157-13.157-7.266 0-13.156 5.89-13.156 13.157v78.937c0 7.266 5.89 13.156 13.156 13.156 7.266 0 13.157-5.89 13.157-13.156v-78.937zm-52.626 13.156c7.266 0 13.157 5.89 13.157 13.156v26.313c0 7.266-5.89 13.156-13.157 13.156-7.265 0-13.156-5.89-13.156-13.156V132.5c0-7.266 5.89-13.156 13.156-13.156zM394.844 132.5c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.157 5.89-13.157 13.156v26.313c0 7.266 5.891 13.156 13.157 13.156s13.156-5.89 13.156-13.156V132.5zm-52.625-39.469c7.266 0 13.156 5.89 13.156 13.157v78.937c0 7.266-5.89 13.156-13.156 13.156-7.266 0-13.156-5.89-13.156-13.156v-78.937c0-7.267 5.89-13.157 13.156-13.157zm-98.672 65.782c10.899 0 19.734-8.836 19.734-19.735s-8.835-19.734-19.734-19.734c-10.899 0-19.734 8.835-19.734 19.734 0 10.899 8.835 19.735 19.734 19.735z",clipRule:"evenodd"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paint0_linear_1290_3143",x1:"0.156",x2:"415.745",y1:"0.938",y2:"225.356",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#00BAC6"}),(0,t.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function je(e){var n=e.className,r=E()(e,fe);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",n)},r),{},{children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M13.07 1.662a.547.547 0 11.86.676l-6.884 8.765v3.147a.547.547 0 01-.507.545l-.04.002a.547.547 0 01-.546-.547v-3.336c0-.123.041-.241.117-.338l7-8.914z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M13.488 1.271a.547.547 0 01.804.548L12.81 13.57a.547.547 0 01-.799.415l-3.81-2.027a.547.547 0 11.513-.965l3.11 1.654 1.25-9.902-9.92 5.425 2.169 1.149c.255.135.36.442.245.702l-.018.037a.547.547 0 01-.739.227L1.744 8.661a.547.547 0 01-.006-.963l11.75-6.427z"})]})}))}var Ne=function(n){var r=n.className,i=E()(n,te);return(0,t.jsx)("span",v()(v()({className:A()("dtc__icon",r)},i),{},{children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:(0,t.jsx)("g",{transform:"translate(-340 -367)",children:(0,t.jsx)("g",{transform:"translate(201 320)",children:(0,t.jsx)("g",{transform:"translate(139 47)",children:(0,t.jsx)("path",{fill:"currentColor",d:"M11 1.5A1.5 1.5 0 0112.5 3v.25h.5a1.5 1.5 0 011.5 1.5v8a1.5 1.5 0 01-1.5 1.5H5a1.5 1.5 0 01-1.5-1.5v-.25H3a1.5 1.5 0 01-1.493-1.356L1.5 11V3A1.5 1.5 0 013 1.5zm1.5 9.5a1.5 1.5 0 01-1.5 1.5H4.5v.25a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-8a.5.5 0 00-.5-.5h-.5zM11 2.5H3a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h8a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5zm-4 1a.5.5 0 01.5.5v2.5H10a.5.5 0 110 1H7.5V10a.5.5 0 11-1 0V7.5H4a.5.5 0 010-1h2.5V4a.5.5 0 01.5-.5z"})})})})})})}))},Se=o(88289),Ie=o(4125),Ae=o(80244),we=o(59058),Le=o(58351),Ge=o(12903),ce=o.n(Ge),He=o(32810),ue=o.n(He),Ue=o(5677),T=o.n(Ue),U=o(53874),F=function(e){return e[e.PENDING=0]="PENDING",e[e.GENERATING=1]="GENERATING",e[e.DONE=2]="DONE",e[e.STOPPED=3]="STOPPED",e}({}),Fe=ce()(function e(n){ue()(this,e),T()(this,"id",void 0),T()(this,"assistantId",void 0),T()(this,"createdAt",void 0),T()(this,"title",void 0),T()(this,"prompts",void 0),T()(this,U.sc,!0),this.id=n.id,this.assistantId=n.assistantId,this.createdAt=n.createdAt||new Date().valueOf(),this.title=n.title,this.prompts=n.prompts||[]}),We=ce()(function e(n){ue()(this,e),T()(this,"id",void 0),T()(this,"assistantId",void 0),T()(this,"createdAt",void 0),T()(this,"title",void 0),T()(this,"messages",void 0),T()(this,U.sc,!0),this.id=n.id,this.assistantId=n.assistantId,this.createdAt=n.createdAt||new Date().valueOf(),this.title=n.title,this.messages=n.messages||[]}),Ze=ce()(function e(n){var r,i;ue()(this,e),T()(this,"id",void 0),T()(this,"assistantId",void 0),T()(this,"creator",void 0),T()(this,"createdAt",void 0),T()(this,"content",void 0),T()(this,"status",void 0),T()(this,U.sc,!0),this.id=n.id,this.creator=n.creator,this.assistantId=n.assistantId,this.createdAt=n.createdAt||new Date().valueOf(),this.content=(r=n.content)!==null&&r!==void 0?r:"",this.status=(i=n.status)!==null&&i!==void 0?i:F.PENDING});function _e(e){return e.loading?(0,t.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]}):(0,t.jsx)(t.Fragment,{children:e.children})}var Ke=o(70300),Ye=o.n(Ke),Je=o(50459),Qe=o(71877),Xe=["typing","className","rehypePlugins","remarkPlugins","components","children"];function Re(e){var n=e.typing,r=e.className,i=e.rehypePlugins,a=i===void 0?[]:i,m=e.remarkPlugins,f=m===void 0?[]:m,I=e.components,g=e.children,S=E()(e,Xe);return(0,t.jsx)(Je.D,v()(v()({className:A()("dtc__aigc__markdown",n&&"dtc__aigc__markdown--blink",r),rehypePlugins:a,remarkPlugins:[Qe.Z].concat(Ye()(f)),components:v()({code:function(_){var C=_.children;return(0,t.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:C})},pre:function(_){var C=_.children,M=C[0],B=/language-(\w+)/.exec(M.props.className||""),G=B?B[1]:"SQL",$=String(M.props.children).replace(/\n$/,"");return(0,t.jsx)(X,{value:$,language:G})}},I)},S),{},{children:g}))}var ke=o(49604),qe=o(52399);function Me(e){var n=e.current,r=e.total,i=e.onChange,a=e.style,m=e.disabled,f=n===1||m,I=n===r||m;return(0,t.jsxs)("div",{className:"dtc-aigc-pagination",style:a,children:[(0,t.jsx)(ke.Z,{className:f?"arrow-disabled":"",onClick:function(){f||i(n-1)}}),(0,t.jsxs)("section",{children:[(0,t.jsx)("span",{children:n}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{children:r})]}),(0,t.jsx)(qe.Z,{className:I?"arrow-disabled":"",onClick:function(){I||i(n+1)}})]})}var be=u.createContext({chat:void 0,maxRegenerateCount:5});function pe(){return u.useContext(be)}var et=["formatText","style"];function ze(e){var n=e.data,r=e.regenerate,i=e.copy,a=e.onRegenerate,m=e.onStop,f=(0,u.useRef)(null),I=pe(),g=I.components,S=g===void 0?{}:g,j=(0,u.useState)(!1),_=P()(j,2),C=_[0],M=_[1],B=function(p){var R=P()(p,1),W=R[0];W.isIntersecting&&M(!0)};(0,Le.Z)(B,f);var G=(0,u.useState)(n.length),$=P()(G,2),V=$[0],D=$[1],h=n[V-1],N=(0,u.useMemo)(function(){return h?[h.status===F.GENERATING,h.status===F.PENDING,h.status===F.STOPPED]:[!1,!1,!1]},[h]),H=P()(N,3),b=H[0],s=H[1],l=H[2];(0,u.useEffect)(function(){D(n.length)},[n.length]);var d=(0,u.useMemo)(function(){return Object.keys(S).reduce(function(x,p){var R=S[p];return x[p]=function(){for(var W=arguments.length,ge=new Array(W),de=0;de<W;de++)ge[de]=arguments[de];return typeof R=="function"?R.apply(void 0,ge.concat([{messageId:h==null?void 0:h.id}])):R},x},{})},[S,h==null?void 0:h.id]),c=(0,u.useMemo)(function(){return typeof i=="boolean"?{disabled:i,options:{}}:{disabled:!1,options:v()({},i||{})}},[i]),y=function(){var p;if(c.disabled)return null;var R=c.options,W=R.formatText,ge=R.style,de=E()(R,et),$e=(p=W==null?void 0:W(h==null?void 0:h.content))!==null&&p!==void 0?p:h==null?void 0:h.content;return $e?(0,t.jsx)(ie.Z,v()({className:"dtc__message__icon",button:(0,t.jsx)(Ne,{}),text:$e,style:v()({fontSize:16},ge)},de)):null};return(0,t.jsxs)("section",{className:"dtc__message__container",children:[(0,t.jsx)("div",{className:"dtc__message__avatar",children:(0,t.jsx)(ye,{})}),(0,t.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,t.jsxs)("div",{className:A()("dtc__message__content",s&&"dtc__message__content--loading"),ref:f,children:[(0,t.jsx)(_e,{loading:s,children:C&&(0,t.jsx)(Re,{typing:b,components:d,children:h==null?void 0:h.content})}),(0,t.jsxs)("div",{className:"dtc__message__footer",children:[n.length>1&&!b&&!s&&(0,t.jsx)(Me,{current:V,total:n.length,onChange:function(p){return D(p)}}),l&&(0,t.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(b||s)&&(0,t.jsx)("div",{className:"dtc__message__extra",children:(0,t.jsx)(L.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return m==null?void 0:m(h)},icon:(0,t.jsx)(he,{style:{fontSize:16,display:"inline-flex"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!b&&!s&&(0,t.jsxs)(Ie.default,{className:"dtc__message__iconGroup",children:[y(),r&&(0,t.jsx)(we.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(p){return p.parentNode},children:(0,t.jsx)("span",{className:"dtc__message__icon",onClick:function(){return a==null?void 0:a(h)},children:(0,t.jsx)(Ce,{style:{fontSize:16}})})})]})]})}function De(e){var n=e.content,r=e.className,i=pe(),a=i.components,m=a===void 0?{}:a;return(0,t.jsx)("section",{className:A()("dtc__prompt__container",r),children:(0,t.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,t.jsx)("div",{className:"dtc__prompt__content",children:(0,t.jsx)(Re,{components:m,children:n||""})})})})}var Oe=5,tt=(0,u.forwardRef)(function(e,n){var r=e.data,i=e.placeholder,a=e.robotIcon,m=a===void 0?!0:a,f=e.disabledScroll,I=e.onRegenerate,g=e.onStop,S=pe(),j=S.maxRegenerateCount,_=S.copy,C=(0,u.useRef)(null),M=le(),B=P()(M,2),G=B[0],$=B[1].height,V=(0,u.useRef)(0),D=(0,u.useRef)(0),h=(0,u.useRef)(!0);(0,u.useImperativeHandle)(n,function(){return{nativeElement:C.current,scrollToBottom:function(){window.requestAnimationFrame(function(){var l;(l=C.current)===null||l===void 0||l.scrollTo({top:C.current.scrollHeight,left:0,behavior:"instant"})})}}});var N=function(){window.clearTimeout(D.current),V.current>=Oe?h.current=H():h.current=!0,V.current+=1,D.current=window.setTimeout(function(){V.current=0},200)},H=function(){if(!C.current)return!1;var l=5,d=C.current,c=d.scrollTop,y=d.clientHeight,x=d.scrollHeight;return c+y>=x-l};(0,u.useEffect)(function(){window.requestAnimationFrame(function(){var s;V.current>=Oe||!h.current||!b||(s=C.current)===null||s===void 0||s.scrollTo({top:C.current.scrollHeight,left:0,behavior:"instant"})})},[$]),(0,u.useEffect)(function(){return function(){window.clearTimeout(D.current)}},[]);var b=!!(Array.isArray(r)&&r.length);return(0,t.jsx)("div",{className:A()("dtc__aigc__content__container",f&&"dtc__aigc__content__container--disabled",b&&"dtc__aigc__content__container--valid"),ref:C,onScroll:N,children:b?(0,t.jsx)("div",{className:"dtc__aigc__content__inner__holder",ref:G,children:r.map(function(s,l){return(0,t.jsxs)(u.Fragment,{children:[(0,t.jsx)(De,{content:s.title}),(0,t.jsx)(ze,{data:s.messages,regenerate:l===r.length-1&&s.messages.length<j,copy:_,onRegenerate:function(c){return I==null?void 0:I(c,s)},onStop:function(c){return g==null?void 0:g(c,s)}})]},s.id)})}):(0,t.jsxs)(u.Fragment,{children:[i,m&&(0,t.jsx)(Pe,{style:{fontSize:200,position:"absolute",right:0,bottom:-100}})]})})}),nt=tt,yt=o(83345),rt=o(50425),ot=["onChange","onPressEnter","onPressShiftEnter","className"];function st(e){var n=e.onChange,r=e.onPressEnter,i=e.onPressShiftEnter,a=e.className,m=E()(e,ot),f=function(g){n==null||n(g.target.value)};return(0,t.jsx)(rt.default.TextArea,v()(v()({className:A()("aigc-textarea",a)},m),{},{onChange:f,onPressEnter:function(g){g.persist(),g.preventDefault(),g.shiftKey&&(n==null||n(m.value+`
`),i==null||i(g)),r==null||r(g)},autoSize:{minRows:1,maxRows:8}}))}var at=o(89822),Ee=o.n(at),it=o(38832),Te=o.n(it),lt=o(22786),Be=o.n(lt),ct=o(46299),ut=o.n(ct),Ve=50;function dt(e){var n=e.onTyping,r=(0,u.useRef)(),i=(0,u.useRef)(""),a=(0,u.useRef)(1),m=(0,u.useRef)(0),f=(0,u.useRef)(!1),I=(0,u.useState)(!1),g=P()(I,2),S=g[0],j=g[1],_=(0,u.useRef)(!1),C=(0,u.useRef)(0);function M(){var N=i.current.length-m.current-1,H=1e3/Ve;a.current=Math.ceil(N/H)}function B(){r.current||(r.current=window.setInterval(function(){if(m.current<i.current.length){var N=i.current;n(N.slice(0,m.current+a.current)),m.current+=a.current}else f.current||(window.clearInterval(r.current),r.current=0,j(!1),_.current=!1)},Ve))}(0,u.useEffect)(function(){return function(){window.clearInterval(r.current),window.clearInterval(C.current),r.current=0}},[]);function G(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";f.current=!0,j(!0),window.clearInterval(r.current),r.current=0,i.current=N,m.current=N.length}function $(N){f.current&&(N.startsWith("n")&&i.current.endsWith("\\")?i.current=i.current.slice(0,-1)+`
`+N.slice(1).replace(/\\n/g,`
`):i.current+=N.replace(/\\n/g,`
`),M(),B())}function V(){return D.apply(this,arguments)}function D(){return D=ut()(Be()().mark(function N(){return Be()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return f.current=!1,_.current=!0,window.clearInterval(C.current),b.abrupt("return",new Promise(function(s){C.current=window.setInterval(function(){_.current||(s(),_.current=!0,window.clearInterval(C.current))},1e3)}));case 4:case"end":return b.stop()}},N)})),D.apply(this,arguments)}function h(){f.current=!1,j(!1),_.current=!1,r.current&&(window.clearInterval(r.current),r.current=0),i.current="",m.current=0}return{start:G,push:$,close:V,stop:h,isTyping:S}}var vt=function(e){Ee()(r,e);var n=Te()(r);function r(){return ue()(this,r),n.apply(this,arguments)}return ce()(r)}(Fe),mt=function(e){Ee()(r,e);var n=Te()(r);function r(){return ue()(this,r),n.apply(this,arguments)}return ce()(r)}(We),ft=function(e){Ee()(r,e);var n=Te()(r);function r(){return ue()(this,r),n.apply(this,arguments)}return ce()(r)}(Ze),ht=function(n){return(n+1)%1e6};function pt(e){var n=(0,u.useReducer)(ht,0),r=P()(n,2),i=r[1],a=(0,u.useRef)(void 0),m=dt({onTyping:function(l){N(f.current.promptId,f.current.messageId,{content:l})}}),f=(0,u.useRef)({promptId:"",messageId:""});function I(s,l){m.start(),N(s,l,{status:F.PENDING}),f.current={promptId:s,messageId:l}}function g(s,l,d){if(s===f.current.promptId&&l===f.current.messageId){var c;m.push(d),((c=H(s,l))===null||c===void 0?void 0:c.status)!==F.GENERATING&&N(s,l,{status:F.GENERATING})}}function S(s,l){m.close().then(function(){N(s,l,{status:F.DONE})})}function j(s){var l,d=(e==null||(l=e.ctor)===null||l===void 0?void 0:l.Conversation)||vt;a.current=new d(s),i()}function _(){a.current=void 0,i()}function C(s){a&&(a.current=(0,U.Uy)(a.current,function(l){Object.assign(l,s)}),i())}function M(){return a.current}function B(){for(var s,l=arguments.length,d=new Array(l),c=0;c<l;c++)d[c]=arguments[c];if(a.current){var y=(e==null||(s=e.ctor)===null||s===void 0?void 0:s.Prompt)||mt;a.current=(0,U.Uy)(a.current,function(x){var p;(p=x.prompts)===null||p===void 0||p.push(new y(d[0]))}),i()}}function G(s){a.current&&(a.current=(0,U.Uy)(a.current,function(l){var d,c,y=(d=l.prompts)===null||d===void 0?void 0:d.findIndex(function(x){return x.id===s});y!==-1&&((c=l.prompts)===null||c===void 0||c.splice(y,1))}),i())}function $(s,l){a.current&&(a.current=(0,U.Uy)(a.current,function(d){var c=d.prompts.find(function(y){return y.id===s});c&&(typeof l=="function"?Object.assign(c,l(c)):Object.assign(c,l))}),i())}function V(s){var l,d;return(l=a.current)===null||l===void 0||(d=l.prompts)===null||d===void 0?void 0:d.find(function(c){return typeof s=="function"?s(c):c.id===s})}function D(s){for(var l,d=arguments.length,c=new Array(d>1?d-1:0),y=1;y<d;y++)c[y-1]=arguments[y];if(a.current){var x=(e==null||(l=e.ctor)===null||l===void 0?void 0:l.Message)||ft;a.current=(0,U.Uy)(a.current,function(p){var R=p.prompts.find(function(W){return W.id===s});R&&R.messages.push(new x(c[0]))}),i()}}function h(s,l){a.current&&(a.current=(0,U.Uy)(a.current,function(d){var c,y,x=d.prompts.find(function(R){return R.id===s});if(x){var p=(c=x.messages)===null||c===void 0?void 0:c.findIndex(function(R){return R.id===l});p!==-1&&((y=x.messages)===null||y===void 0||y.splice(p,1))}}),i())}function N(s,l,d){a.current&&(a.current=(0,U.Uy)(a.current,function(c){var y,x=c.prompts.find(function(R){return R.id===s}),p=x==null||(y=x.messages)===null||y===void 0?void 0:y.find(function(R){return R.id===l});p&&(typeof d=="function"?Object.assign(p,d(p)):Object.assign(p,d))}),i())}function H(s,l){var d,c,y,x;return(d=a.current)===null||d===void 0||(c=d.prompts)===null||c===void 0||(y=c.find(function(p){return p.id===s}))===null||y===void 0||(x=y.messages)===null||x===void 0?void 0:x.find(function(p){return p.id===l})}function b(){var s,l,d,c=(s=a.current)===null||s===void 0||(l=s.prompts.at(-1))===null||l===void 0||(d=l.messages)===null||d===void 0?void 0:d.at(-1);return c?c.status===F.PENDING||c.status===F.GENERATING:!1}return{conversation:{create:j,remove:_,update:C,get:M},prompt:{create:B,remove:G,update:$,get:V},message:{create:D,remove:h,update:N,get:H},loading:b,start:I,push:g,close:S,stop:m.stop,isTyping:m.isTyping}}var gt=5;function z(e){var n=e.chat,r=e.components,i=e.maxRegenerateCount,a=i===void 0?gt:i,m=e.copy,f=e.children;return(0,t.jsx)(be.Provider,{value:{chat:n,components:r,maxRegenerateCount:a,copy:m},children:f})}z.useChat=pt,z.useContext=pe,z.Loading=_e,z.Button=se,z.CodeBlock=X,z.Input=st,z.Loading=_e,z.Markdown=Re,z.Pagination=Me,z.Message=ze,z.Prompt=De,z.Content=nt,z.Icon={SendIcon:je};var xt=z},9392:function(xe,Q,o){o.d(Q,{Z:function(){return X}});var u=o(48651),Y=o.n(u),v=o(80244),ne=o(59058),L=o(86516),ve=o.n(L),E=o(71089),J=o(75020),A=o(79685),t=o(68591),re=o.n(t),oe=o(16777),se=o.n(oe),ae=o(50475),O=o(63342),ie=function(){return(0,O.jsx)("span",{className:"dtc-copy__default-icon",children:(0,O.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:(0,O.jsx)("path",{d:"M704 96a96 96 0 0 1 96 96v16h32a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H320a96 96 0 0 1-96-96v-16h-32a96 96 0 0 1-95.936-92.4L96 704V192a96 96 0 0 1 96-96z m96 608a96 96 0 0 1-96 96H288v16a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32h-32z m-96-544H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32z m-256 64a32 32 0 0 1 32 32v160h160a32 32 0 1 1 0 64H480v160a32 32 0 1 1-64 0V480H256a32 32 0 1 1 0-64h160V256a32 32 0 0 1 32-32z"})})})},me=function(P){var q=P.button,le=q===void 0?(0,O.jsx)(ie,{}):q,w=P.text,Z=P.tooltip,K=Z===void 0?"\u590D\u5236":Z,ee=P.style,fe=P.className,te=P.onCopy,ye=te===void 0?function(){return J.default.success("\u590D\u5236\u6210\u529F")}:te,Ce=se()(),he=ve()(Ce,2),Pe=he[0],je=he[1],Ne=function(){je(w),ye(w)},Se=function(){return(0,O.jsx)("span",{className:re()(["dtc-copy",fe]),style:ee,onClick:function(){return Ne()},children:le})},Ie=(0,ae.Z)(K);return(0,O.jsx)(ne.default,Y()(Y()({},Ie),{},{children:Se()}))},X=me},58351:function(xe,Q,o){var u=o(86516),Y=o.n(u),v=o(79685),ne=function(ve,E){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=J.threshold,t=A===void 0?0:A,re=J.root,oe=re===void 0?null:re,se=J.rootMargin,ae=se===void 0?"0%":se,O=J.freezeOnceVisible,ie=O===void 0?!1:O,me=(0,v.useState)(),X=Y()(me,2),k=X[0],P=X[1],q=(k==null?void 0:k.isIntersecting)&&ie,le=function(Z,K){P(Z[0]),ve(Z,K)};(0,v.useEffect)(function(){var w=E==null?void 0:E.current,Z=!!window.IntersectionObserver;if(!(q||!w)){if(!Z){var K,ee,fe={boundingClientRect:(K=w==null?void 0:w.getBoundingClientRect())!==null&&K!==void 0?K:null,intersectionRatio:w?1:0,intersectionRect:(ee=w==null?void 0:w.getBoundingClientRect())!==null&&ee!==void 0?ee:null,isIntersecting:!!w,rootBounds:null,target:w,time:Date.now()};le([fe],null)}var te=new IntersectionObserver(le,{threshold:t,root:oe,rootMargin:ae});return te.observe(w),function(){return te.disconnect()}}},[E==null?void 0:E.current,JSON.stringify(t),oe,ae,q])};Q.Z=ne},50475:function(xe,Q,o){o.d(Q,{Z:function(){return ne}});var u=o(40765),Y=o.n(u),v=o(79685);function ne(L){return L!==null&&Y()(L)==="object"&&!v.isValidElement(L)?L:{title:L}}}}]);
