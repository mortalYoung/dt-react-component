"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[9339],{76165:function(ge,Y,t){t.d(Y,{NL:function(){return e},rJ:function(){return V},ri:function(){return P},v0:function(){return te}});var v=t(12903),L=t.n(v),l=t(32810),Z=t.n(l),z=t(5677),x=t.n(z),m=t(53874),V=function(f){return f[f.PENDING=0]="PENDING",f[f.GENERATING=1]="GENERATING",f[f.DONE=2]="DONE",f[f.STOPPED=3]="STOPPED",f}({}),P=L()(function f(_){Z()(this,f),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"createdAt",void 0),x()(this,"title",void 0),x()(this,"prompts",void 0),x()(this,m.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.prompts=_.prompts||[]}),e=L()(function f(_){Z()(this,f),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"createdAt",void 0),x()(this,"title",void 0),x()(this,"messages",void 0),x()(this,m.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.messages=_.messages||[]}),te=L()(function f(_){var D,I;Z()(this,f),x()(this,"id",void 0),x()(this,"assistantId",void 0),x()(this,"creator",void 0),x()(this,"createdAt",void 0),x()(this,"content",void 0),x()(this,"status",void 0),x()(this,m.sc,!0),this.id=_.id,this.creator=_.creator,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.content=(D=_.content)!==null&&D!==void 0?D:"",this.status=(I=_.status)!==null&&I!==void 0?I:V.PENDING})},59339:function(ge,Y,t){t.d(Y,{Z:function(){return mn}});var v=t(79685),L=t(48651),l=t.n(L),Z=t(90554),z=t(28870),x=t(38046),m=t.n(x),V=t(68591),P=t.n(V),e=t(63342),te=["type","className","children"];function f(n){var r=n.type,a=r===void 0?"default":r,c=n.className,s=n.children,p=m()(n,te);return(0,e.jsxs)(z.default,l()(l()({className:P()("dtc__aigc__button",c,"dtc__aigc__button--".concat(a)),ghost:!0},p),{},{children:[(0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"secondary_linear_gradient",x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:"secondary_linear_gradient_hover",x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})}),(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:s})]}))}var _=t(81930),D=t(45217),I=t(9392),Q=["lineNumberStyle"];function ce(n){var r=n.className,a=n.style,c=n.toolbars,s=n.copy,p=n.convert,y=n.children,b=n.options,E=b===void 0?{}:b,B=E.lineNumberStyle,A=B===void 0?{}:B,U=m()(E,Q),w=(0,v.useMemo)(function(){var ae=y[0],ie=/language-(\w+)/.exec(ae.props.className||""),le=ie?ie[1]:"SQL",F=String(ae.props.children).replace(/\n$/,"");return{value:F,language:le}},[y]),K=w.value,J=w.language,N=(0,v.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:l()({},s||{})}},[s]),se=K||"";return(0,e.jsxs)("div",{className:P()("dtc__aigc__codeblock",p&&"dtc__aigc__codeblock--convert",r),style:a,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:J.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!N.disabled&&(0,e.jsx)(I.Z,l()({text:se},N.options)),typeof c=="function"?c():c]})]}),(0,e.jsx)(_.Z,l()(l()({language:J.toLocaleLowerCase(),wrapLines:!0,style:l()(l()({},D.Yn),{},{'code[class*="language-"]':l()(l()({},D.Yn['code[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff"}),'pre[class*="language-"]':l()(l()({},D.Yn['pre[class*="language-"]']),{},{background:p?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:l()({fontStyle:"normal"},A),showLineNumbers:!0},U),{},{children:se}))]})}var re=t(86516),G=t.n(re),C=t(76165),H=["className"],X=["className"],T=["className"],k=["className"],q=["className","gradient"],oe=["className"],me=["className"];function ee(n){var r=n.className,a=m()(n,H);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",r)},a),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1259_37039)",fillRule:"evenodd",d:"M8.5 3.5a.5.5 0 00-1 0V4H4.75a1 1 0 00-1 1v7a1 1 0 001 1h6.5a1 1 0 001-1V5a1 1 0 00-1-1H8.5v-.5zm2.75 8.5V5h-6.5v7h6.5zM7 8.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM3 7a.5.5 0 00-1 0v3a.5.5 0 001 0V7zm-2 .5a.5.5 0 01.5.5v1a.5.5 0 01-1 0V8a.5.5 0 01.5-.5zm14.5.5a.5.5 0 00-1 0v1a.5.5 0 001 0V8zm-2-1.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0V7a.5.5 0 01.5-.5zM9.75 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1259_37039",x1:"0.5",x2:"16.294",y1:"3",y2:"11.529",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function xe(n){var r=n.className,a=m()(n,X);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",r)},a),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.495 4.209a6.609 6.609 0 00-5.452-2.87 6.621 6.621 0 00-6.617 6.626 6.621 6.621 0 006.617 6.625 6.62 6.62 0 006.208-4.324.5.5 0 10-.938-.347 5.62 5.62 0 01-5.27 3.67 5.621 5.621 0 01-5.617-5.624A5.621 5.621 0 018.043 2.34a5.61 5.61 0 014.731 2.59l-.003.003L11.304 6.4h3.446V2.955L13.495 4.21z",clipRule:"evenodd"})})}))}function S(n){var r=n.className,a=m()(n,T);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",r)},a),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:(0,e.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.332 7.999a6.666 6.666 0 016.667-6.667 6.666 6.666 0 016.666 6.667A6.666 6.666 0 018 14.665 6.666 6.666 0 011.332 8zm12.333 0A5.666 5.666 0 008 2.332a5.665 5.665 0 00-5.667 5.667 5.666 5.666 0 005.667 5.666A5.666 5.666 0 0013.665 8zM6.972 6.125a.5.5 0 01.5.5v2.747a.5.5 0 01-1 0V6.625a.5.5 0 01.5-.5zm2.553.5a.5.5 0 10-1 0v2.747a.5.5 0 001 0V6.625z",clipRule:"evenodd"})})}))}function _e(n){var r=n.className,a=m()(n,k);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",r)},a),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 268 265",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_1290_3143)",fillOpacity:"0.03",fillRule:"evenodd",d:"M210.656 14.094c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.156 5.89-13.156 13.156V27.25h-72.36c-14.532 0-26.312 11.78-26.312 26.313V237.75c0 14.532 11.78 26.313 26.312 26.313h171.032c14.532 0 26.312-11.781 26.312-26.313V53.562c0-14.531-11.78-26.312-26.312-26.312h-72.36V14.094zm72.36 39.468H111.984V237.75h171.032V53.562zm-111.828 85.516c0 10.899-8.836 19.735-19.735 19.735s-19.734-8.836-19.734-19.735 8.835-19.734 19.734-19.734c10.899 0 19.735 8.835 19.735 19.734zm-105.25-32.89c0-7.267-5.89-13.157-13.157-13.157-7.266 0-13.156 5.89-13.156 13.157v78.937c0 7.266 5.89 13.156 13.156 13.156 7.266 0 13.157-5.89 13.157-13.156v-78.937zm-52.626 13.156c7.266 0 13.157 5.89 13.157 13.156v26.313c0 7.266-5.89 13.156-13.157 13.156-7.265 0-13.156-5.89-13.156-13.156V132.5c0-7.266 5.89-13.156 13.156-13.156zM394.844 132.5c0-7.266-5.89-13.156-13.156-13.156-7.266 0-13.157 5.89-13.157 13.156v26.313c0 7.266 5.891 13.156 13.157 13.156s13.156-5.89 13.156-13.156V132.5zm-52.625-39.469c7.266 0 13.156 5.89 13.156 13.157v78.937c0 7.266-5.89 13.156-13.156 13.156-7.266 0-13.156-5.89-13.156-13.156v-78.937c0-7.267 5.89-13.157 13.156-13.157zm-98.672 65.782c10.899 0 19.734-8.836 19.734-19.735s-8.835-19.734-19.734-19.734c-10.899 0-19.734 8.835-19.734 19.734 0 10.899 8.835 19.735 19.734 19.735z",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_1290_3143",x1:"0.156",x2:"415.745",y1:"0.938",y2:"225.356",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})})]})}))}function fe(n){var r=n.className,a=n.gradient,c=m()(n,q);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",r)},c),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 16",children:[(0,e.jsx)("path",{fill:a?"url(#secondary_linear_gradient)":"currentColor",d:"M13.07 1.662a.547.547 0 11.86.676l-6.884 8.765v3.147a.547.547 0 01-.507.545l-.04.002a.547.547 0 01-.546-.547v-3.336c0-.123.041-.241.117-.338l7-8.914z"}),(0,e.jsx)("path",{fill:a?"url(#secondary_linear_gradient)":"currentColor",d:"M13.488 1.271a.547.547 0 01.804.548L12.81 13.57a.547.547 0 01-.799.415l-3.81-2.027a.547.547 0 11.513-.965l3.11 1.654 1.25-9.902-9.92 5.425 2.169 1.149c.255.135.36.442.245.702l-.018.037a.547.547 0 01-.739.227L1.744 8.661a.547.547 0 01-.006-.963l11.75-6.427z"})]})}))}var ye=function(r){var a=r.className,c=m()(r,oe);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",a)},c),{},{children:(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",children:(0,e.jsx)("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:(0,e.jsx)("g",{transform:"translate(-340 -367)",children:(0,e.jsx)("g",{transform:"translate(201 320)",children:(0,e.jsx)("g",{transform:"translate(139 47)",children:(0,e.jsx)("path",{fill:"currentColor",d:"M11 1.5A1.5 1.5 0 0112.5 3v.25h.5a1.5 1.5 0 011.5 1.5v8a1.5 1.5 0 01-1.5 1.5H5a1.5 1.5 0 01-1.5-1.5v-.25H3a1.5 1.5 0 01-1.493-1.356L1.5 11V3A1.5 1.5 0 013 1.5zm1.5 9.5a1.5 1.5 0 01-1.5 1.5H4.5v.25a.5.5 0 00.5.5h8a.5.5 0 00.5-.5v-8a.5.5 0 00-.5-.5h-.5zM11 2.5H3a.5.5 0 00-.5.5v8a.5.5 0 00.5.5h8a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5zm-4 1a.5.5 0 01.5.5v2.5H10a.5.5 0 110 1H7.5V10a.5.5 0 11-1 0V7.5H4a.5.5 0 010-1h2.5V4a.5.5 0 01.5-.5z"})})})})})})}))},Ce=function(r){var a=r.className,c=m()(r,me);return(0,e.jsx)("span",l()(l()({className:P()("dtc__icon",a)},c),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},Me=t(88289),Ne=t(4125),Ae=t(80244),Oe=t(59058),$e=t(58351);function De(n){return n.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:n.children})}var Le=t(70300),ze=t.n(Le),Fe=t(50459),Ve=t(71877),Ge=["typing","className","rehypePlugins","remarkPlugins","components","children","onMount"],Ee=(0,v.memo)(function(r){var a=r.typing,c=r.className,s=r.rehypePlugins,p=s===void 0?[]:s,y=r.remarkPlugins,b=y===void 0?[]:y,E=r.components,B=r.children,A=r.onMount,U=m()(r,Ge);return(0,v.useEffect)(function(){A==null||A()},[]),(0,e.jsx)(Fe.D,l()(l()({className:P()("dtc__aigc__markdown",a&&"dtc__aigc__markdown--blink",c),rehypePlugins:p,remarkPlugins:[Ve.Z].concat(ze()(b)),components:l()({code:function(K){var J=K.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:J})},pre:function(K){var J=K.children;return(0,e.jsx)(ce,{children:J})}},E)},U),{},{children:B}))},function(n,r){return!(n.typing!==r.typing||n.className!==r.className||n.children!==r.children)}),We=t(49604),He=t(52399);function Se(n){var r=n.current,a=n.total,c=n.onChange,s=n.style,p=n.disabled,y=r===1||p,b=r===a||p;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:s,children:[(0,e.jsx)(We.Z,{className:y?"arrow-disabled":"",onClick:function(){y||c(r-1)}}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:a})]}),(0,e.jsx)(He.Z,{className:b?"arrow-disabled":"",onClick:function(){b||c(r+1)}})]})}var Be=v.createContext({chat:void 0,maxRegenerateCount:5});function je(){return v.useContext(Be)}var Ke=["formatText","style"];function Ue(n){var r=n.data,a=n.regenerate,c=n.copy,s=n.onRegenerate,p=n.onStop,y=n.onLazyRendered,b=(0,v.useRef)(null),E=je(),B=E.components,A=B===void 0?{}:B,U=E.messageIcons,w=(0,v.useState)(!1),K=G()(w,2),J=K[0],N=K[1],se=(0,v.useRef)(function(){}),ae=function(R){var ne=G()(R,1),de=ne[0];de.isIntersecting&&N(function(he){if(!he){var ve=function(){return new Promise(function(_n){se.current=_n})};y==null||y(ve)}return!0})};(0,$e.Z)(ae,b);var ie=(0,v.useState)(r.length),le=G()(ie,2),F=le[0],ue=le[1],h=r[F-1],$=(0,v.useMemo)(function(){return h?[h.status===C.rJ.GENERATING,h.status===C.rJ.PENDING,h.status===C.rJ.STOPPED]:[!1,!1,!1]},[h]),O=G()($,3),i=O[0],o=O[1],u=O[2];(0,v.useEffect)(function(){ue(r.length)},[r.length]);var d=(0,v.useMemo)(function(){return Object.keys(A).reduce(function(j,R){var ne=A[R];return j[R]=function(){for(var de=arguments.length,he=new Array(de),ve=0;ve<de;ve++)he[ve]=arguments[ve];return typeof ne=="function"?ne.apply(void 0,he.concat([{messageId:h==null?void 0:h.id}])):ne},j},{})},[A,h==null?void 0:h.id]),g=(0,v.useMemo)(function(){return typeof c=="boolean"?{disabled:c,options:{}}:{disabled:!1,options:l()({},c||{})}},[c]),M=function(){var R;if(g.disabled)return null;var ne=g.options,de=ne.formatText,he=ne.style,ve=m()(ne,Ke),Te=(R=de==null?void 0:de(h==null?void 0:h.content))!==null&&R!==void 0?R:h==null?void 0:h.content;return Te?(0,e.jsx)(I.Z,l()({className:"dtc__message__icon",button:(0,e.jsx)(ye,{}),text:Te,style:l()({fontSize:16},he)},ve)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(ee,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:P()("dtc__message__content",o&&"dtc__message__content--loading"),ref:b,children:[(0,e.jsx)(De,{loading:o,children:J&&(0,e.jsx)(Ee,{typing:i,components:d,onMount:function(){se.current()},children:h==null?void 0:h.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[r.length>1&&!i&&!o&&(0,e.jsx)(Se,{current:F,total:r.length,onChange:function(R){return ue(R)}}),u&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(i||o)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(z.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return p==null?void 0:p(h)},icon:(0,e.jsx)(S,{style:{fontSize:16,display:"inline-flex"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!i&&!o&&(0,e.jsxs)(Ne.default,{className:"dtc__message__iconGroup",children:[M(),typeof U=="function"?U(h):U,a&&(0,e.jsx)(Oe.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(R){return R.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return s==null?void 0:s(h)},children:(0,e.jsx)(xe,{style:{fontSize:16}})})})]})]})}function we(n){var r=n.data,a=n.className,c=je(),s=c.components,p=s===void 0?{}:s,y=(0,v.useMemo)(function(){return Object.keys(p).reduce(function(b,E){var B=p[E];return b[E]=function(){for(var A=arguments.length,U=new Array(A),w=0;w<A;w++)U[w]=arguments[w];return typeof B=="function"?B.apply(void 0,U.concat([{promptId:r==null?void 0:r.id}])):B},b},{})},[p,r==null?void 0:r.id]);return(0,e.jsx)("section",{className:P()("dtc__prompt__container",a),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Ee,{components:y,children:(r==null?void 0:r.title)||""})})})})}var Ze=(0,v.forwardRef)(function(n,r){var a,c,s=n.data,p=n.placeholder,y=n.robotIcon,b=y===void 0?!0:y,E=n.scrollable,B=E===void 0?!0:E,A=n.onRegenerate,U=n.onStop,w=je(),K=w.maxRegenerateCount,J=w.copy,N=(0,v.useRef)(null),se=(0,v.useState)(!0),ae=G()(se,2),ie=ae[0],le=ae[1],F=(0,v.useRef)(0);(0,v.useImperativeHandle)(r,function(){return{nativeElement:N.current,scrollToBottom:function(){F.current=window.requestAnimationFrame(function(){var i,o;(i=N.current)===null||i===void 0||i.scrollTo({top:(o=N.current)===null||o===void 0?void 0:o.scrollHeight,left:0,behavior:"instant"})})}}});var ue=function(){if(!N.current)return!1;var i=5,o=N.current,u=o.scrollTop,d=o.clientHeight,g=o.scrollHeight;return u+d>=g-i},h=!!(Array.isArray(s)&&s.length),$=h?(a=s.at(-1))===null||a===void 0||(c=a.messages)===null||c===void 0?void 0:c.at(-1):void 0;return(0,v.useLayoutEffect)(function(){var O,i=function(){N.current&&le(ue())};return(O=N.current)===null||O===void 0||O.addEventListener("scroll",i),function(){var o;(o=N.current)===null||o===void 0||o.removeEventListener("scroll",i),window.cancelAnimationFrame(F.current)}},[]),(0,v.useLayoutEffect)(function(){F.current=window.requestAnimationFrame(function(){N.current&&(h?N.current.scrollTop=N.current.scrollHeight:N.current.scrollTop=0)})},[$==null?void 0:$.id]),(0,v.useLayoutEffect)(function(){F.current=window.requestAnimationFrame(function(){N.current&&($==null?void 0:$.status)===C.rJ.GENERATING&&ie&&(N.current.scrollTop=N.current.scrollHeight)})},[$==null?void 0:$.status,$==null?void 0:$.content,ie]),(0,e.jsx)("div",{className:P()("dtc__aigc__content__container",!B&&"dtc__aigc__content__container--disabled",h&&B&&"dtc__aigc__content__container--valid"),ref:N,children:h?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:s.map(function(O,i){return(0,e.jsxs)(v.Fragment,{children:[(0,e.jsx)(we,{data:O}),(0,e.jsx)(Ue,{data:O.messages,regenerate:i===s.length-1&&O.messages.length<K,copy:J,onRegenerate:function(u){return A==null?void 0:A(u,O)},onStop:function(u){return U==null?void 0:U(u,O)},onLazyRendered:function(u){var d=ue();u().then(function(){window.requestAnimationFrame(function(){le(d),d&&N.current&&(N.current.scrollTop=N.current.scrollHeight)})})}})]},O.id)})}):(0,e.jsxs)(v.Fragment,{children:[p,b&&(0,e.jsx)(_e,{style:{fontSize:200,position:"absolute",right:0,bottom:-100}})]})})}),Je=Ze,fn=t(83345),Ye=t(50425),Qe=["onChange","onPressEnter","onPressShiftEnter","className"];function Xe(n){var r=n.onChange,a=n.onPressEnter,c=n.onPressShiftEnter,s=n.className,p=m()(n,Qe),y=function(E){r==null||r(E.target.value)};return(0,e.jsx)(Ye.default.TextArea,l()(l()({className:P()("aigc-textarea",s)},p),{},{onChange:y,onPressEnter:function(E){E.persist(),E.preventDefault(),E.shiftKey?(r==null||r(p.value+`
`),c==null||c(E)):a==null||a(E)},autoSize:{minRows:1,maxRows:8}}))}var ke=["className","children"],qe=function(r){var a=r.className,c=r.children,s=m()(r,ke);return(0,e.jsxs)("div",l()(l()({className:P()("dtc__tag",a)},s),{},{children:[(0,e.jsx)(Ce,{className:"dtc__tag__icon"}),c]}))},en=qe,nn=t(12903),Pe=t.n(nn),tn=t(32810),Ie=t.n(tn),rn=t(89822),Re=t.n(rn),on=t(38832),be=t.n(on),pe=t(53874),sn=t(18411),an=function(n){Re()(a,n);var r=be()(a);function a(){return Ie()(this,a),r.apply(this,arguments)}return Pe()(a)}(C.ri),ln=function(n){Re()(a,n);var r=be()(a);function a(){return Ie()(this,a),r.apply(this,arguments)}return Pe()(a)}(C.NL),cn=function(n){Re()(a,n);var r=be()(a);function a(){return Ie()(this,a),r.apply(this,arguments)}return Pe()(a)}(C.v0),un=function(r){return(r+1)%1e6};function dn(n){var r=(0,v.useReducer)(un,0),a=G()(r,2),c=a[1],s=(0,v.useRef)(void 0),p=(0,sn.Z)({onTyping:function(o){F(y.current.promptId,y.current.messageId,{content:o})}}),y=(0,v.useRef)({promptId:"",messageId:""});function b(i,o){p.start(),F(i,o,{status:C.rJ.PENDING}),y.current={promptId:i,messageId:o}}function E(i,o,u){if(i===y.current.promptId&&o===y.current.messageId){var d;p.push(u),((d=ue(i,o))===null||d===void 0?void 0:d.status)!==C.rJ.GENERATING&&F(i,o,{status:C.rJ.GENERATING})}}function B(i,o){p.close().then(function(){F(i,o,{status:C.rJ.DONE})})}function A(i){var o,u=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Conversation)||an;s.current=new u(i),c()}function U(){s.current=void 0,c()}function w(i){s&&(s.current=(0,pe.Uy)(s.current,function(o){Object.assign(o,i)}),c())}function K(){return s.current}function J(){for(var i,o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];if(s.current){var g=(n==null||(i=n.ctor)===null||i===void 0?void 0:i.Prompt)||ln;s.current=(0,pe.Uy)(s.current,function(M){var j;(j=M.prompts)===null||j===void 0||j.push(new g(u[0]))}),c()}}function N(i){s.current&&(s.current=(0,pe.Uy)(s.current,function(o){var u,d,g=(u=o.prompts)===null||u===void 0?void 0:u.findIndex(function(M){return M.id===i});g!==-1&&((d=o.prompts)===null||d===void 0||d.splice(g,1))}),c())}function se(i,o){s.current&&(s.current=(0,pe.Uy)(s.current,function(u){var d=u.prompts.find(function(g){return g.id===i});d&&(typeof o=="function"?Object.assign(d,o(d)):Object.assign(d,o))}),c())}function ae(i){var o,u;return(o=s.current)===null||o===void 0||(u=o.prompts)===null||u===void 0?void 0:u.find(function(d){return typeof i=="function"?i(d):d.id===i})}function ie(i){for(var o,u=arguments.length,d=new Array(u>1?u-1:0),g=1;g<u;g++)d[g-1]=arguments[g];if(s.current){var M=(n==null||(o=n.ctor)===null||o===void 0?void 0:o.Message)||cn;s.current=(0,pe.Uy)(s.current,function(j){var R=j.prompts.find(function(ne){return ne.id===i});R&&R.messages.push(new M(d[0]))}),c()}}function le(i,o){s.current&&(s.current=(0,pe.Uy)(s.current,function(u){var d,g,M=u.prompts.find(function(R){return R.id===i});if(M){var j=(d=M.messages)===null||d===void 0?void 0:d.findIndex(function(R){return R.id===o});j!==-1&&((g=M.messages)===null||g===void 0||g.splice(j,1))}}),c())}function F(i,o,u){s.current&&(s.current=(0,pe.Uy)(s.current,function(d){var g,M=d.prompts.find(function(R){return R.id===i}),j=M==null||(g=M.messages)===null||g===void 0?void 0:g.find(function(R){return R.id===o});j&&(typeof u=="function"?Object.assign(j,u(j)):Object.assign(j,u))}),c())}function ue(i,o){var u,d,g,M;return(u=s.current)===null||u===void 0||(d=u.prompts)===null||d===void 0||(g=d.find(function(j){return j.id===i}))===null||g===void 0||(M=g.messages)===null||M===void 0?void 0:M.find(function(j){return j.id===o})}function h(){var i,o,u,d=(i=s.current)===null||i===void 0||(o=i.prompts.at(-1))===null||o===void 0||(u=o.messages)===null||u===void 0?void 0:u.at(-1);return d?d.status===C.rJ.PENDING||d.status===C.rJ.GENERATING:!1}function $(){return K()}function O(i){s.current=i,c()}return{conversation:{create:A,remove:U,update:w,get:K},prompt:{create:J,remove:N,update:se,get:ae},message:{create:ie,remove:le,update:F,get:ue},loading:h,start:b,push:E,close:B,stop:p.stop,isTyping:p.isTyping,saveViewState:$,restoreViewState:O}}var vn=5;function W(n){var r=n.chat,a=n.components,c=n.maxRegenerateCount,s=c===void 0?vn:c,p=n.copy,y=n.messageIcons,b=n.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:a,maxRegenerateCount:s,copy:p,messageIcons:y},children:b})}W.useChat=dn,W.useContext=je,W.Loading=De,W.Button=f,W.CodeBlock=ce,W.Input=Xe,W.Markdown=Ee,W.Pagination=Se,W.Message=Ue,W.Prompt=we,W.Content=Je,W.Tag=en,W.Icon={SendIcon:fe};var mn=W},9392:function(ge,Y,t){t.d(Y,{Z:function(){return re}});var v=t(48651),L=t.n(v),l=t(80244),Z=t(59058),z=t(86516),x=t.n(z),m=t(71089),V=t(75020),P=t(79685),e=t(68591),te=t.n(e),f=t(16777),_=t.n(f),D=t(50475),I=t(63342),Q=function(){return(0,I.jsx)("span",{className:"dtc-copy__default-icon",children:(0,I.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",children:(0,I.jsx)("path",{d:"M704 96a96 96 0 0 1 96 96v16h32a96 96 0 0 1 96 96v512a96 96 0 0 1-96 96H320a96 96 0 0 1-96-96v-16h-32a96 96 0 0 1-95.936-92.4L96 704V192a96 96 0 0 1 96-96z m96 608a96 96 0 0 1-96 96H288v16a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V304a32 32 0 0 0-32-32h-32z m-96-544H192a32 32 0 0 0-32 32v512a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32z m-256 64a32 32 0 0 1 32 32v160h160a32 32 0 1 1 0 64H480v160a32 32 0 1 1-64 0V480H256a32 32 0 1 1 0-64h160V256a32 32 0 0 1 32-32z"})})})},ce=function(C){var H=C.button,X=H===void 0?(0,I.jsx)(Q,{}):H,T=C.text,k=C.tooltip,q=k===void 0?"\u590D\u5236":k,oe=C.style,me=C.className,ee=C.onCopy,xe=ee===void 0?function(){return V.default.success("\u590D\u5236\u6210\u529F")}:ee,S=_()(),_e=x()(S,2),fe=_e[0],ye=_e[1],Ce=function(){ye(T),xe(T)},Me=function(){return(0,I.jsx)("span",{className:te()(["dtc-copy",me]),style:oe,onClick:function(){return Ce()},children:X})},Ne=(0,D.Z)(q);return(0,I.jsx)(Z.default,L()(L()({},Ne),{},{children:Me()}))},re=ce},58351:function(ge,Y,t){var v=t(86516),L=t.n(v),l=t(79685),Z=function(x,m){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=V.threshold,e=P===void 0?0:P,te=V.root,f=te===void 0?null:te,_=V.rootMargin,D=_===void 0?"0%":_,I=V.freezeOnceVisible,Q=I===void 0?!1:I,ce=(0,l.useState)(),re=L()(ce,2),G=re[0],C=re[1],H=(G==null?void 0:G.isIntersecting)&&Q,X=function(k,q){C(k[0]),x(k,q)};(0,l.useEffect)(function(){var T=m==null?void 0:m.current,k=!!window.IntersectionObserver;if(!(H||!T)){if(!k){var q,oe,me={boundingClientRect:(q=T==null?void 0:T.getBoundingClientRect())!==null&&q!==void 0?q:null,intersectionRatio:T?1:0,intersectionRect:(oe=T==null?void 0:T.getBoundingClientRect())!==null&&oe!==void 0?oe:null,isIntersecting:!!T,rootBounds:null,target:T,time:Date.now()};X([me],null)}var ee=new IntersectionObserver(X,{threshold:e,root:f,rootMargin:D});return ee.observe(T),function(){return ee.disconnect()}}},[m==null?void 0:m.current,JSON.stringify(e),f,D,H])};Y.Z=Z},18411:function(ge,Y,t){t.d(Y,{Z:function(){return P}});var v=t(22786),L=t.n(v),l=t(46299),Z=t.n(l),z=t(86516),x=t.n(z),m=t(79685),V=50;function P(e){var te=e.onTyping,f=(0,m.useRef)(),_=(0,m.useRef)(""),D=(0,m.useRef)(1),I=(0,m.useRef)(0),Q=(0,m.useRef)(!1),ce=(0,m.useState)(!1),re=x()(ce,2),G=re[0],C=re[1],H=(0,m.useRef)(!1),X=(0,m.useRef)(0);function T(){var S=_.current.length-I.current-1,_e=1e3/V;D.current=Math.ceil(S/_e)}function k(){f.current||(f.current=window.setInterval(function(){if(I.current<_.current.length){var S=_.current;te(S.slice(0,I.current+D.current)),I.current+=D.current}else Q.current||(window.clearInterval(f.current),f.current=0,C(!1),H.current=!1)},V))}(0,m.useEffect)(function(){return function(){window.clearInterval(f.current),window.clearInterval(X.current),f.current=0}},[]);function q(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";Q.current=!0,C(!0),window.clearInterval(f.current),f.current=0,_.current=S,I.current=S.length}function oe(S){Q.current&&(S.startsWith("n")&&_.current.endsWith("\\")?_.current=_.current.slice(0,-1)+`
`+S.slice(1).replace(/\\n/g,`
`):_.current+=S.replace(/\\n/g,`
`),T(),k())}function me(){return ee.apply(this,arguments)}function ee(){return ee=Z()(L()().mark(function S(){return L()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Q.current=!1,H.current=!0,window.clearInterval(X.current),fe.abrupt("return",new Promise(function(ye){X.current=window.setInterval(function(){H.current||(ye(),H.current=!0,window.clearInterval(X.current))},1e3)}));case 4:case"end":return fe.stop()}},S)})),ee.apply(this,arguments)}function xe(){Q.current=!1,C(!1),H.current=!1,f.current&&(window.clearInterval(f.current),f.current=0),_.current="",I.current=0}return{start:q,push:oe,close:me,stop:xe,isTyping:G}}},50475:function(ge,Y,t){t.d(Y,{Z:function(){return Z}});var v=t(40765),L=t.n(v),l=t(79685);function Z(z){return z!==null&&L()(z)==="object"&&!l.isValidElement(z)?z:{title:z}}}}]);
